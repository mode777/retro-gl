!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.FLOAT_SIZE=4,e.SHORT_SIZE=2,e.BYTE_SIZE=1,e.VERTICES_QUAD=4,e.INDICES_QUAD=6,e.COMP_POS=2,e.COMP_Z_INDEX=1,e.COMP_SIZE_Z_INDEX=1,e.COMP_SIZE_POS=2,e.COMP_PAL_PAL_SHIFT=1,e.COMP_SIZE_PAL_SHIFT=1,e.COMP_UV=2,e.COMP_SIZE_UV=1,e.UV_TILE=16,e.TEXTURE_SIZE=256,e.HUGE=Number.MAX_VALUE,e.MIN_Z=1,e.MAX_Z=255,e.COMP_RGBA=4,e.COMP_RGB=3,e.COMP_INDEXED=1,e.PAL_OFFSET=1/256,e.OFFSET_Z_INDEX=e.COMP_POS*e.COMP_SIZE_POS,e.OFFSET_PAL_SHIFT=e.OFFSET_Z_INDEX+e.COMP_SIZE_Z_INDEX,e.OFFSET_UV=e.OFFSET_PAL_SHIFT+e.COMP_SIZE_PAL_SHIFT,e.VERTEX_SIZE=e.COMP_POS*e.COMP_SIZE_POS+e.COMP_UV*e.COMP_SIZE_UV+e.COMP_SIZE_Z_INDEX+e.COMP_SIZE_PAL_SHIFT,e.VERTEX_SIZE_SHORT=e.VERTEX_SIZE>>1,e.QUAD_SIZE=e.VERTEX_SIZE*e.VERTICES_QUAD,e.QUAD_SIZE_SHORT=e.VERTEX_SIZE_SHORT*e.VERTICES_QUAD,e.MAT4_IDENT=n.mat4.identity(n.mat4.create()),e.MAX_VERTICES=65536,e.MAX_QUADS=e.MAX_VERTICES/e.VERTICES_QUAD},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=r},function(t,e,r){"use strict";function n(t,e){function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function a(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&(r[n[a]]=t[n[a]]);return r}function i(t,e,r,n){var a,i=arguments.length,o=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function o(t,e){return function(r,n){e(r,n,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(a,i){function o(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){t.done?a(t.value):new r(function(e){e(t.value)}).then(o,s)}u((n=n.apply(t,e||[])).next())})}function l(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=e.call(t,u)}catch(t){r=[6,t],i=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,i,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function f(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function h(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(t){a={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function d(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function p(t,e,r){function n(t){f[t]&&(l[t]=function(e){return new Promise(function(r,n){c.push([t,e,r,n])>1||a(t,e)})})}function a(t,e){try{i(f[t](e))}catch(t){u(c[0][3],t)}}function i(t){t.value instanceof _?Promise.resolve(t.value.v).then(o,s):u(c[0][2],t)}function o(t){a("next",t)}function s(t){a("throw",t)}function u(t,e){t(e),c.shift(),c.length&&a(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,e||[]),c=[];return l={},n("next"),n("throw"),n("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(t){function e(e,a){t[e]&&(r[e]=function(r){return(n=!n)?{value:_(t[e](r)),done:"return"===e}:a?a(r):r})}var r,n;return r={},e("next"),e("throw",function(t){throw t}),e("return"),r[Symbol.iterator]=function(){return this},r}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):"function"==typeof c?c(t):t[Symbol.iterator]()}Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=n,r.d(e,"__assign",function(){return v}),e.__rest=a,e.__decorate=i,e.__param=o,e.__metadata=s,e.__awaiter=u,e.__generator=l,e.__exportStar=f,e.__values=c,e.__read=h,e.__spread=d,e.__await=_,e.__asyncGenerator=p,e.__asyncDelegator=m,e.__asyncValues=b;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}},function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,r,n,a){if(e.subarray&&t.subarray)return void t.set(e.subarray(r,r+n),a);for(var i=0;i<n;i++)t[a+i]=e[r+i]},flattenChunks:function(t){var e,r,n,a,i,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),a=0,e=0,r=t.length;e<r;e++)i=t[e],o.set(i,a),a+=i.length;return o}},i={arraySet:function(t,e,r,n,a){for(var i=0;i<n;i++)t[a+i]=e[r+i]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(n)},function(t,e,r){/*!
 * @license twgl.js 3.4.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){t.exports=r()}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n,a;n=[r(1),r(10),r(11),r(12)],void 0!==(a=function(t,e,r,n){"use strict";return t.m4=e,t.v3=r,t.primitives=n,t}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(2),r(5),r(7),r(6),r(8),r(3),r(9),r(4)],void 0!==(a=function(t,e,r,n,a,i,o,s){"use strict";function u(e){s.copyExistingProperties(e,b),t.setDefaults_(e),a.setDefaults_(e)}function l(t){if(t&&b.enableVertexArrayObjects&&s.isWebGL1(t)){var e=t.getExtension("OES_vertex_array_object");e&&(t.createVertexArray=function(){return e.createVertexArrayOES()},t.deleteVertexArray=function(t){e.deleteVertexArrayOES(t)},t.isVertexArray=function(t){return e.isVertexArrayOES(t)},t.bindVertexArray=function(t){e.bindVertexArrayOES(t)},t.VERTEX_ARRAY_BINDING=e.VERTEX_ARRAY_BINDING_OES)}}function f(t,e){for(var r=["webgl","experimental-webgl"],n=null,a=0;a<r.length&&!(n=t.getContext(r[a],e));++a);return n}function c(t,e){var r=f(t,e);return l(r),r}function h(t,e){for(var r=["webgl2","webgl","experimental-webgl"],n=null,a=0;a<r.length&&!(n=t.getContext(r[a],e));++a);return n}function d(t,e){var r=h(t,e);return l(r),r}function _(t,e){e=e||1,e=Math.max(1,e);var r=t.clientWidth*e|0,n=t.clientHeight*e|0;return(t.width!==r||t.height!==n)&&(t.width=r,t.height=n,!0)}function p(t){return"_"!==t[t.length-1]}function m(t,e){return Object.keys(t).filter(p).forEach(function(r){e[r]=t[r]}),e}var b={enableVertexArrayObjects:!0},y={getContext:d,getWebGLContext:c,isWebGL1:s.isWebGL1,isWebGL2:s.isWebGL2,resizeCanvasToDisplaySize:_,setDefaults:u},v={attributes:t,draw:e,framebuffers:r,programs:n,textures:a,typedArrays:i,vertexArrays:o};return Object.keys(v).forEach(function(t){var e=v[t];m(e,y),y[t]=m(e,{})}),y}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(3),r(4)],void 0!==(a=function(t,e){"use strict";function r(t){g.attribPrefix=t}function n(t){e.copyExistingProperties(t,g)}function a(t,e,r,n,a){t.bindBuffer(e,r),t.bufferData(e,n,a||t.STATIC_DRAW)}function i(t,e,r,n){if(e instanceof WebGLBuffer)return e;r=r||t.ARRAY_BUFFER;var i=t.createBuffer();return a(t,r,i,e,n),i}function o(t){return"indices"===t}function s(t){return t instanceof Int8Array||t instanceof Uint8Array}function u(t){return t===Int8Array||t===Uint8Array}function l(t){return t.length?t:t.data}function f(t,e){var r;if(r=E.test(t)?2:M.test(t)?4:3,e%r>0)throw"Can not guess numComponents for attribute '"+t+"'. Tried "+r+" but "+e+" values is not evenly divisible by "+r+". You should specify it.";return r}function c(t,e){return t.numComponents||t.size||f(e,l(t).length)}function h(e,r){if(t.isArrayBuffer(e))return e;if(t.isArrayBuffer(e.data))return e.data;Array.isArray(e)&&(e={data:e});var n=e.type;return n||(n=o(r)?Uint16Array:Float32Array),new n(e.data)}function d(e,r){var n={};return Object.keys(r).forEach(function(a){if(!o(a)){var l,d,_,p,m,b=r[a],y=b.attrib||b.name||b.attribName||g.attribPrefix+a;if("number"==typeof b||"number"==typeof b.data){m=b.data||b;var v=b.type||Float32Array,x=m*v.BYTES_PER_ELEMENT;d=t.getGLTypeForTypedArrayType(v),_=void 0!==b.normalize?b.normalize:u(v),p=b.numComponents||b.size||f(a,m),l=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,x,b.drawType||e.STATIC_DRAW)}else{var E=h(b,a);l=i(e,E,void 0,b.drawType),d=t.getGLTypeForTypedArray(E),_=void 0!==b.normalize?b.normalize:s(E),p=c(b,a),m=E.length}n[y]={buffer:l,numComponents:p,type:d,normalize:_,stride:b.stride||0,offset:b.offset||0,drawType:b.drawType}}}),e.bindBuffer(e.ARRAY_BUFFER,null),n}function _(t,e,r,n){r=h(r),void 0!==n?(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.bufferSubData(t.ARRAY_BUFFER,n,r)):a(t,t.ARRAY_BUFFER,e.buffer,r,e.drawType)}function p(t,e){return e===t.BYTE?1:e===t.UNSIGNED_BYTE?1:e===t.SHORT?2:e===t.UNSIGNED_SHORT?2:e===t.INT?4:e===t.UNSIGNED_INT?4:e===t.FLOAT?4:0}function m(t){for(var e,r=0;r<S.length&&!((e=S[r])in t);++r);r===S.length&&(e=Object.keys(t)[0]);var n=t[e],a=l(n).length,i=c(n,e),o=a/i;if(a%i>0)throw"numComponents "+i+" not correct for length "+a;return o}function b(t,e){for(var r,n=0;n<S.length&&!((r=S[n])in e)&&!((r=g.attribPrefix+r)in e);++n);n===S.length&&(r=Object.keys(e)[0]);var a=e[r];t.bindBuffer(t.ARRAY_BUFFER,a.buffer);var i=t.getBufferParameter(t.ARRAY_BUFFER,t.BUFFER_SIZE);t.bindBuffer(t.ARRAY_BUFFER,null);var o=p(t,a.type),s=i/o,u=a.numComponents||a.size,l=s/u;if(l%1!=0)throw"numComponents "+u+" not correct for length "+length;return l}function y(e,r){var n={attribs:d(e,r)},a=r.indices;return a?(a=h(a,"indices"),n.indices=i(e,a,e.ELEMENT_ARRAY_BUFFER),n.numElements=a.length,n.elementType=t.getGLTypeForTypedArray(a)):n.numElements=b(e,n.attribs),n}function v(t,e,r){var n="indices"===r?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;return i(t,h(e,r),n)}function x(e,r){var n={};return Object.keys(r).forEach(function(t){n[t]=v(e,r[t],t)}),r.indices?(n.numElements=r.indices.length,n.elementType=t.getGLTypeForTypedArray(h(r.indices),"indices")):n.numElements=m(r),n}var g={attribPrefix:""},E=/coord|texture/i,M=/color|colour/i,S=["position","positions","a_position"];return{createAttribsFromArrays:d,createBuffersFromArrays:x,createBufferFromArray:v,createBufferFromTypedArray:i,createBufferInfoFromArrays:y,setAttribInfoBufferFromArray:_,setAttributePrefix:r,setDefaults_:n,getNumComponents_:c,getArray_:l}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[],void 0!==(a=function(){"use strict";function t(t){if(t instanceof Int8Array)return a;if(t instanceof Uint8Array)return i;if(t instanceof Uint8ClampedArray)return i;if(t instanceof Int16Array)return o;if(t instanceof Uint16Array)return s;if(t instanceof Int32Array)return u;if(t instanceof Uint32Array)return l;if(t instanceof Float32Array)return f;throw"unsupported typed array type"}function e(t){if(t===Int8Array)return a;if(t===Uint8Array)return i;if(t===Uint8ClampedArray)return i;if(t===Int16Array)return o;if(t===Uint16Array)return s;if(t===Int32Array)return u;if(t===Uint32Array)return l;if(t===Float32Array)return f;throw"unsupported typed array type"}function r(t){var e=c[t];if(!e)throw"unknown gl type";return e}function n(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer}var a=5120,i=5121,o=5122,s=5123,u=5124,l=5125,f=5126,c={},h=c;return h[a]=Int8Array,h[i]=Uint8Array,h[o]=Int16Array,h[s]=Uint16Array,h[u]=Int32Array,h[l]=Uint32Array,h[f]=Float32Array,h[32819]=Uint16Array,h[32820]=Uint16Array,h[33635]=Uint16Array,h[5131]=Uint16Array,h[33640]=Uint32Array,h[35899]=Uint32Array,h[35902]=Uint32Array,h[36269]=Uint32Array,h[34042]=Uint32Array,{getGLTypeForTypedArray:t,getGLTypeForTypedArrayType:e,getTypedArrayTypeForGLType:r,isArrayBuffer:n}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[],void 0!==(a=function(){"use strict";function t(t){var e={};return Object.keys(t).forEach(function(r){e[r]=t[r]}),e}function e(t,e,r){t.forEach(function(t){var n=e[t];void 0!==n&&(r[t]=n)})}function r(t,e){Object.keys(e).forEach(function(r){e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r])})}function n(t){return!!t.texStorage2D}function a(t){return!t.texStorage2D}return{copyExistingProperties:r,copyNamedProperties:e,shallowCopy:t,isWebGL1:a,isWebGL2:n,error:window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},warn:window.console&&window.console.warn&&"function"==typeof window.console.warn?window.console.warn.bind(window.console):function(){}}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(6)],void 0!==(a=function(t){"use strict";function e(t,e,r,n,a){r=void 0===r?t.TRIANGLES:r;var i=e.indices,o=e.elementType,s=void 0===n?e.numElements:n;a=void 0===a?0:a,o||i?t.drawElements(r,s,void 0===o?t.UNSIGNED_SHORT:e.elementType,a):t.drawArrays(r,a,s)}function r(r,n){var a=null,i=null;n.forEach(function(n){if(!1!==n.active){var o=n.programInfo,s=n.vertexArrayInfo||n.bufferInfo,u=!1,l=void 0===n.type?r.TRIANGLES:n.type;o!==a&&(a=o,r.useProgram(o.program),u=!0),(u||s!==i)&&(i&&i.vertexArrayObject&&!s.vertexArrayObject&&r.bindVertexArray(null),i=s,t.setBuffersAndAttributes(r,o,s)),t.setUniforms(o,n.uniforms),e(r,s,l,n.count,n.offset)}}),i.vertexArrayObject&&r.bindVertexArray(null)}return{drawBufferInfo:e,drawObjectList:r}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(4)],void 0!==(a=function(t){"use strict";function e(t,e){return it[e].bindPoint}function r(t,e){return function(r){t.uniform1f(e,r)}}function n(t,e){return function(r){t.uniform1fv(e,r)}}function a(t,e){return function(r){t.uniform2fv(e,r)}}function i(t,e){return function(r){t.uniform3fv(e,r)}}function o(t,e){return function(r){t.uniform4fv(e,r)}}function s(t,e){return function(r){t.uniform1i(e,r)}}function u(t,e){return function(r){t.uniform1iv(e,r)}}function l(t,e){return function(r){t.uniform2iv(e,r)}}function f(t,e){return function(r){t.uniform3iv(e,r)}}function c(t,e){return function(r){t.uniform4iv(e,r)}}function h(t,e){return function(r){t.uniform1ui(e,r)}}function d(t,e){return function(r){t.uniform1uiv(e,r)}}function _(t,e){return function(r){t.uniform2uiv(e,r)}}function p(t,e){return function(r){t.uniform3uiv(e,r)}}function m(t,e){return function(r){t.uniform4uiv(e,r)}}function b(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}}function y(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}}function v(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}}function x(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}}function g(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}}function E(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}}function M(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}}function S(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}}function w(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}}function I(r,n,a,i){var o=e(r,n);return t.isWebGL2(r)?function(t){var e=void 0,n=void 0;t instanceof WebGLTexture?(e=t,n=null):(e=t.texture,n=t.sampler),r.uniform1i(i,a),r.activeTexture(r.TEXTURE0+a),r.bindTexture(o,e),r.bindSampler(a,n)}:function(t){r.uniform1i(i,a),r.activeTexture(r.TEXTURE0+a),r.bindTexture(o,t)}}function F(r,n,a,i,o){for(var s=e(r,n),u=new Int32Array(o),l=0;l<o;++l)u[l]=a+l;return t.isWebGL2(r)?function(t){r.uniform1iv(i,u),t.forEach(function(t,e){r.activeTexture(r.TEXTURE0+u[e]);var n=void 0,i=void 0;t instanceof WebGLTexture?(n=t,i=null):(n=t.texture,i=t.sampler),r.bindSampler(a,i),r.bindTexture(s,n)})}:function(t){r.uniform1iv(i,u),t.forEach(function(t,e){r.activeTexture(r.TEXTURE0+u[e]),r.bindTexture(s,t)})}}function A(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.numComponents||r.size,r.type||t.FLOAT,r.normalize||!1,r.stride||0,r.offset||0)}}function T(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||t.INT,r.stride||0,r.offset||0)}}function D(t,e,r){var n=r.size,a=r.count;return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer);for(var i=r.size||r.numComponents||n,o=i/a,s=r.type||t.FLOAT,u=it[s],l=u.size*i,f=r.normalize||!1,c=r.offset||0,h=l/a,d=0;d<a;++d)t.enableVertexAttribArray(e+d),t.vertexAttribPointer(e+d,o,s,f,l,c+h*d)}}function R(t,e){return e=e||0,++e,t.split("\n").map(function(t,r){return r+e+": "+t}).join("\n")}function P(t,e,r,n){var a=n||nt,i=t.createShader(r),o=0;if(ut.test(e)&&(o=1,e=e.replace(ut,"")),t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(i);return a(R(e,o)+"\n*** Error compiling shader: "+s),t.deleteShader(i),null}return i}function U(t,e,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t)r=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;var n=t;r=n.errorCallback,t=n.attribLocations;var a=n.transformFeedbackVaryings}var i={errorCallback:r||nt,transformFeedbackVaryings:a};if(t){var o={};Array.isArray(t)?t.forEach(function(t,r){o[t]=e?e[r]:r}):o=t,i.attribLocations=o}return i}function k(t){return t.indexOf("frag")>=0?st.FRAGMENT_SHADER:t.indexOf("vert")>=0?st.VERTEX_SHADER:void 0}function z(t,e){e.forEach(function(e){t.deleteShader(e)})}function O(t,e,r,n,a){for(var i=U(r,n,a),o=[],s=[],u=0;u<e.length;++u){var l=e[u];if("string"==typeof l){var f=document.getElementById(l),c=f?f.text:l,h=t[lt[u]];f&&f.type&&(h=k(f.type)||h),l=P(t,c,h,i.errorCallback),s.push(l)}l instanceof WebGLShader&&o.push(l)}if(o.length!==e.length)return programOptions.errorCallback("not enough shaders for program"),z(t,s),null;var d=t.createProgram();o.forEach(function(e){t.attachShader(d,e)}),i.attribLocations&&Object.keys(i.attribLocations).forEach(function(e){t.bindAttribLocation(d,i.attribLocations[e],e)});var _=i.transformFeedbackVaryings;if(_&&(_.attribs&&(_=_.attribs),Array.isArray(_)||(_=Object.keys(_)),t.transformFeedbackVaryings(d,_,i.transformFeedbackMode||t.SEPARATE_ATTRIBS)),t.linkProgram(d),!t.getProgramParameter(d,t.LINK_STATUS)){var p=t.getProgramInfoLog(d);return i.errorCallback("Error in program linking:"+p),t.deleteProgram(d),z(t,s),null}return d}function C(t,e,r,n){var a="",i=document.getElementById(e);if(!i)throw"*** Error: unknown script element"+e;a=i.text;var o=r||k(i.type);if(!o)throw"*** Error: unknown shader type";return P(t,a,o,n)}function B(t,e,r,n,a){for(var i=U(r,n,a),o=[],s=0;s<e.length;++s){var u=C(t,e[s],t[lt[s]],i.errorCallback);if(!u)return null;o.push(u)}return O(t,o,i)}function N(t,e,r,n,a){for(var i=U(r,n,a),o=[],s=0;s<e.length;++s){var u=P(t,e[s],t[lt[s]],i.errorCallback);if(!u)return null;o.push(u)}return O(t,o,i)}function L(t,e){for(var r=0,n={},a=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<a;++i){var o=t.getActiveUniform(e,i);if(!o)break;var s=o.name;"[0]"===s.substr(-3)&&(s=s.substr(0,s.length-3));var u=function(e,n){var a=t.getUniformLocation(e,n.name),i=n.size>1&&"[0]"===n.name.substr(-3),o=n.type,s=it[o];if(!s)throw"unknown type: 0x"+o.toString(16);var u;if(s.bindPoint){var l=r;r+=n.size,u=i?s.arraySetter(t,o,l,a,n.size):s.setter(t,o,l,a,n.size)}else u=s.arraySetter&&i?s.arraySetter(t,a):s.setter(t,a);return u.location=a,u}(e,o);n[s]=u}return n}function X(t,e){for(var r={},n=t.getProgramParameter(e,t.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<n;++a){var i=t.getTransformFeedbackVarying(e,a);r[i.name]={index:a,type:i.type,size:i.size}}return r}function V(t,e,r){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(var n in r){var a=e[n];if(a){var i=r[n];i.offset?t.bindBufferRange(t.TRANSFORM_FEEDBACK_BUFFER,a.index,i.buffer,i.offset,i.size):t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a.index,i.buffer)}}}function Z(t,e,r){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(var n in r){var a=e[n];a&&t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a.index,null)}}function G(t,e,r){var n=t.createTransformFeedback();return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n),t.useProgram(e.program),V(t,e,r),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),Z(t,e,r),n}function Y(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],a=[],i=0;i<r;++i){a.push(i),n.push({});var o=t.getActiveUniform(e,i);if(!o)break;n[i].name=o.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var i=r[0],o=r[1];t.getActiveUniforms(e,a,t[i]).forEach(function(t,e){n[e][o]=t})});var s={},u=t.getProgramParameter(e,t.ACTIVE_UNIFORM_BLOCKS);for(i=0;i<u;++i){var l=t.getActiveUniformBlockName(e,i),f={index:i,usedByVertexShader:t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};f.used=f.usedByVertexSahder||f.usedByFragmentShader,s[l]=f}return{blockSpecs:s,uniformData:n}}function j(t,e,r,n){var a=r.blockSpecs,i=r.uniformData,o=a[n];if(!o)return at("no uniform block object named:",n),{name:n,uniforms:{}};var s=new ArrayBuffer(o.size),u=t.createBuffer(),l=o.index;t.bindBuffer(t.UNIFORM_BUFFER,u),t.uniformBlockBinding(e,o.index,l);var f=n+".";ft.test(f)&&(f=f.replace(ft,"."));var c={};return o.uniformIndices.forEach(function(t){var e=i[t],r=it[e.type],n=r.Type,a=e.size*r.size,o=e.name;o.substr(0,f.length)===f&&(o=o.substr(f.length)),c[o]=new n(s,e.offset,a/n.BYTES_PER_ELEMENT)}),{name:n,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:c}}function H(t,e,r){return j(t,e.program,e.uniformBlockSpec,r)}function q(t,e,r){var n=e.uniformBlockSpec||e,a=n.blockSpecs[r.name];if(a){var i=a.index;return t.bindBufferRange(t.UNIFORM_BUFFER,i,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function Q(t,e,r){q(t,e,r)&&t.bufferData(t.UNIFORM_BUFFER,r.array,t.DYNAMIC_DRAW)}function W(t,e){var r=t.uniforms;for(var n in e){var a=r[n];if(a){var i=e[n];i.length?a.set(i):a[0]=i}}}function K(t,e){for(var r=t.uniformSetters||t,n=arguments.length,a=1;a<n;++a){var i=arguments[a];if(Array.isArray(i))for(var o=i.length,s=0;s<o;++s)K(r,i[s]);else for(var u in i){var l=r[u];l&&l(i[u])}}}function $(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var i=t.getActiveAttrib(e,a);if(!i)break;var o=t.getAttribLocation(e,i.name),s=ot[i.type],u=s.setter(t,o,s);u.location=o,r[i.name]=u}return r}function J(t,e){for(var r in e){var n=t[r];n&&n(e[r])}}function tt(t,e,r){r.vertexArrayObject?t.bindVertexArray(r.vertexArrayObject):(J(e.attribSetters||e,r.attribs),r.indices&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices))}function et(e,r){var n=L(e,r),a=$(e,r),i={program:r,uniformSetters:n,attribSetters:a};return t.isWebGL2(e)&&(i.uniformBlockSpec=Y(e,r),i.transformFeedbackInfo=X(e,r)),i}function rt(t,e,r,n,a){var i=U(r,n,a),o=!0;if(e=e.map(function(t){if(t.indexOf("\n")<0){var e=document.getElementById(t);e?t=e.text:(i.errorCallback("no element with id: "+t),o=!1)}return t}),!o)return null;var s=N(t,e,i);return s?et(t,s):null}var nt=t.error,at=t.warn,it={};it[5126]={Type:Float32Array,size:4,setter:r,arraySetter:n},it[35664]={Type:Float32Array,size:8,setter:a},it[35665]={Type:Float32Array,size:12,setter:i},it[35666]={Type:Float32Array,size:16,setter:o},it[5124]={Type:Int32Array,size:4,setter:s,arraySetter:u},it[35667]={Type:Int32Array,size:8,setter:l},it[35668]={Type:Int32Array,size:12,setter:f},it[35669]={Type:Int32Array,size:16,setter:c},it[5125]={Type:Uint32Array,size:4,setter:h,arraySetter:d},it[36294]={Type:Uint32Array,size:8,setter:_},it[36295]={Type:Uint32Array,size:12,setter:p},it[36296]={Type:Uint32Array,size:16,setter:m},it[35670]={Type:Uint32Array,size:4,setter:s,arraySetter:u},it[35671]={Type:Uint32Array,size:8,setter:l},it[35672]={Type:Uint32Array,size:12,setter:f},it[35673]={Type:Uint32Array,size:16,setter:c},it[35674]={Type:Float32Array,size:16,setter:b},it[35675]={Type:Float32Array,size:36,setter:y},it[35676]={Type:Float32Array,size:64,setter:v},it[35685]={Type:Float32Array,size:24,setter:x},it[35686]={Type:Float32Array,size:32,setter:E},it[35687]={Type:Float32Array,size:24,setter:g},it[35688]={Type:Float32Array,size:48,setter:S},it[35689]={Type:Float32Array,size:32,setter:M},it[35690]={Type:Float32Array,size:48,setter:w},it[35678]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:3553},it[35680]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:34067},it[35679]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:32879},it[35682]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:3553},it[36289]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:35866},it[36292]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:35866},it[36293]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:34067},it[36298]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:3553},it[36299]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:32879},it[36300]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:34067},it[36303]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:35866},it[36306]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:3553},it[36307]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:32879},it[36308]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:34067},it[36311]={Type:null,size:0,setter:I,arraySetter:F,bindPoint:35866};var ot={};ot[5126]={size:4,setter:A},ot[35664]={size:8,setter:A},ot[35665]={size:12,setter:A},ot[35666]={size:16,setter:A},ot[5124]={size:4,setter:T},ot[35667]={size:8,setter:T},ot[35668]={size:12,setter:T},ot[35669]={size:16,setter:T},ot[5125]={size:4,setter:T},ot[36294]={size:8,setter:T},ot[36295]={size:12,setter:T},ot[36296]={size:16,setter:T},ot[35670]={size:4,setter:T},ot[35671]={size:8,setter:T},ot[35672]={size:12,setter:T},ot[35673]={size:16,setter:T},ot[35674]={size:4,setter:D,count:2},ot[35675]={size:9,setter:D,count:3},ot[35676]={size:16,setter:D,count:4};var st=void 0,ut=/^[ \t]*\n/,lt=["VERTEX_SHADER","FRAGMENT_SHADER"],ft=/\[\d+\]\.$/;return{createAttributeSetters:$,createProgram:O,createProgramFromScripts:B,createProgramFromSources:N,createProgramInfo:rt,createProgramInfoFromProgram:et,createUniformSetters:L,createUniformBlockSpecFromProgram:Y,createUniformBlockInfoFromProgram:j,createUniformBlockInfo:H,createTransformFeedback:G,createTransformFeedbackInfo:X,bindTransformFeedbackInfo:V,setAttributes:J,setBuffersAndAttributes:tt,setUniforms:K,setUniformBlock:Q,setBlockUniforms:W,bindUniformBlock:q}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(8),r(4)],void 0!==(a=function(t,e){"use strict";function r(t){return l[t]}function n(t){return f[t]}function a(a,i,o,l){var f=a.FRAMEBUFFER,c=a.createFramebuffer();a.bindFramebuffer(f,c),o=o||a.drawingBufferWidth,l=l||a.drawingBufferHeight,i=i||u;var h=0,d={framebuffer:c,attachments:[],width:o,height:l};return i.forEach(function(i){var u=i.attachment,c=i.format,_=r(c);if(_||(_=s+h++),!u)if(n(c))u=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,u),a.renderbufferStorage(a.RENDERBUFFER,c,o,l);else{var p=e.shallowCopy(i);p.width=o,p.height=l,void 0===p.auto&&(p.auto=!1,p.min=p.min||p.minMag||a.LINEAR,p.mag=p.mag||p.minMag||a.LINEAR,p.wrapS=p.wrapS||p.wrap||a.CLAMP_TO_EDGE,p.wrapT=p.wrapT||p.wrap||a.CLAMP_TO_EDGE),u=t.createTexture(a,p)}if(u instanceof WebGLRenderbuffer)a.framebufferRenderbuffer(f,_,a.RENDERBUFFER,u);else{if(!(u instanceof WebGLTexture))throw"unknown attachment type";a.framebufferTexture2D(f,_,i.texTarget||a.TEXTURE_2D,u,i.level||0)}d.attachments.push(u)}),d}function i(e,r,n,a,i){a=a||e.drawingBufferWidth,i=i||e.drawingBufferHeight,r.width=a,r.height=i,n=n||u,n.forEach(function(n,o){var s=r.attachments[o],u=n.format;if(s instanceof WebGLRenderbuffer)e.bindRenderbuffer(e.RENDERBUFFER,s),e.renderbufferStorage(e.RENDERBUFFER,u,a,i);else{if(!(s instanceof WebGLTexture))throw"unknown attachment type";t.resizeTexture(e,s,n,a,i)}})}function o(t,e,r){r=r||t.FRAMEBUFFER,e?(t.bindFramebuffer(r,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(r,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}var s=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],l={};l[34041]=33306,l[6401]=36128,l[36168]=36128,l[6402]=36096,l[33189]=36096;var f={};return f[32854]=!0,f[32855]=!0,f[36194]=!0,f[34041]=!0,f[33189]=!0,f[6401]=!0,f[36168]=!0,{bindFramebufferInfo:o,createFramebufferInfo:a,resizeFramebufferInfo:i}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(3),r(4)],void 0!==(a=function(t,e){"use strict";function r(t,e){var r=Z[t];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function n(t){var e=Z[t];if(!e)throw"unknown internal format";return{format:e.textureFormat,type:Array.isArray(e.type)?e.type[0]:e.type}}function a(t){return 0==(t&t-1)}function i(t,r,n,i){if(!e.isWebGL2(t))return a(r)&&a(n);var o=Z[i];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function o(t){var e=Z[t];if(!e)throw"unknown internal format";return e.textureFilterable}function s(t){var e=X[t];if(!e)throw"unknown format: "+t;return e.numColorComponents}function u(e,r,n){return C(r)?t.getGLTypeForTypedArray(r):n||e.UNSIGNED_BYTE}function l(t,e,r,n,a){if(a%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=a/n)%1)throw"can't guess dimensions"}else if((n=a/r)%1)throw"can't guess dimensions"}else{var i=Math.sqrt(a/(e===t.TEXTURE_CUBE_MAP?6:1));i%1==0?(r=i,n=i):(r=a,n=1)}return{width:r,height:n}}function f(t){O.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function c(t){e.copyExistingProperties(t,O),t.textureColor&&f(t.textureColor)}function h(t,e){void 0!==e.colorspaceConversion&&(Y.colorspaceConversion=t.getParameter(t.UNPACK_COLORSPACE_CONVERSION_WEBGL),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(Y.premultiplyAlpha=t.getParameter(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha)),void 0!==e.flipY&&(Y.flipY=t.getParameter(t.UNPACK_FLIP_Y_WEBGL),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY))}function d(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Y.flipY)}function _(t,e,r,n){n.minMag&&(r.call(t,e,t.TEXTURE_MIN_FILTER,n.minMag),r.call(t,e,t.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(t,e,t.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(t,e,t.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(t,e,t.TEXTURE_WRAP_S,n.wrap),r.call(t,e,t.TEXTURE_WRAP_T,n.wrap),(e===t.TEXTURE_3D||e instanceof j)&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(t,e,t.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(t,e,t.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(t,e,t.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(t,e,t.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(t,e,t.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(t,e,t.TEXTURE_MAX_LEVEL,n.maxLevel)}function p(t,e,r){var n=r.target||t.TEXTURE_2D;t.bindTexture(n,e),_(t,n,t.texParameteri,r)}function m(t,e,r){_(t,e,t.samplerParameteri,r)}function b(t,e){var r=t.createSampler();return m(t,r,e),r}function y(t,e){var r={};return Object.keys(e).forEach(function(n){r[n]=b(t,e[n])}),r}function v(t){return t=t||O.textureColor,C(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function x(t,e,r,n,a,s,u){r=r||O.textureOptions,s=s||t.RGBA,u=u||t.UNSIGNED_BYTE;var l=r.target||t.TEXTURE_2D;if(n=n||r.width,a=a||r.height,t.bindTexture(l,e),i(t,n,a,s,u))t.generateMipmap(l);else{var f=o(s,u)?t.LINEAR:t.NEAREST;t.texParameteri(l,t.TEXTURE_MIN_FILTER,f),t.texParameteri(l,t.TEXTURE_MAG_FILTER,f),t.texParameteri(l,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(l,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}}function g(t,e){return e=e||{},e.cubeFaceOrder||[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function E(t,e){var r=g(t,e),n=r.map(function(t,e){return{face:t,ndx:e}});return n.sort(function(t,e){return t.face-e.face}),n}function M(t,e,r,a){a=a||O.textureOptions;var i=a.target||t.TEXTURE_2D,o=r.width,s=r.height,u=a.internalFormat||a.format||t.RGBA,l=n(u),f=a.format||l.format,c=a.type||l.type;if(h(t,a),t.bindTexture(i,e),i===t.TEXTURE_CUBE_MAP){var _,m,b=r.width,y=r.height;if(b/6===y)_=y,m=[0,0,1,0,2,0,3,0,4,0,5,0];else if(y/6===b)_=b,m=[0,0,0,1,0,2,0,3,0,4,0,5];else if(b/3==y/2)_=b/3,m=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(b/2!=y/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);_=b/2,m=[0,0,1,0,0,1,1,1,0,2,1,2]}B.canvas.width=_,B.canvas.height=_,o=_,s=_,E(t,a).forEach(function(e){var n=m[2*e.ndx+0]*_,a=m[2*e.ndx+1]*_;B.drawImage(r,n,a,_,_,0,0,_,_),t.texImage2D(e.face,0,u,f,c,B.canvas)}),B.canvas.width=1,B.canvas.height=1}else if(i===t.TEXTURE_3D){var v=Math.min(r.width,r.height),g=Math.max(r.width,r.height),M=g/v;if(M%1!=0)throw"can not compute 3D dimensions of element";var S=r.width===g?1:0,w=r.height===g?1:0;t.texImage3D(i,0,u,v,v,v,0,f,c,null),B.canvas.width=v,B.canvas.height=v;for(var I=0;I<M;++I){var F=I*v*S,A=I*v*w,T=v,D=v,R=v,P=v;B.drawImage(r,F,A,T,D,0,0,R,P),t.texSubImage3D(i,0,0,0,I,v,v,1,f,c,B.canvas)}B.canvas.width=0,B.canvas.height=0}else t.texImage2D(i,0,u,f,c,r);d(t,a),!1!==a.auto&&x(t,e,a,o,s,u,c),p(t,e,a)}function S(){}function w(t,r,n){function a(){s.removeEventListener("error",i),s.removeEventListener("load",o),s=null}function i(){var r="couldn't load image: "+t;e.error(r),n(r,s),a()}function o(){n(null,s),a()}n=n||S;var s=new Image;return r=void 0!==r?r:O.crossOrigin,void 0!==r&&(s.crossOrigin=r),s.addEventListener("error",i),s.addEventListener("load",o),s.src=t,s}function I(t,e,r){r=r||O.textureOptions;var n=r.target||t.TEXTURE_2D;if(t.bindTexture(n,e),!1!==r.color){var a=v(r.color);if(n===t.TEXTURE_CUBE_MAP)for(var i=0;i<6;++i)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a);else n===t.TEXTURE_3D||n===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage2D(n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a)}}function F(t,r,n,a){return a=a||S,n=n||O.textureOptions,I(t,r,n),n=e.shallowCopy(n),w(n.src,n.crossOrigin,function(e,i){e?a(e,r,i):(M(t,r,i,n),a(null,r,i))})}function A(t,r,a,i){function o(e){return function(n,o){--m,n?b.push(n):o.width!==o.height?b.push("cubemap face img is not a square: "+o.src):(h(t,a),t.bindTexture(_,r),5===m?g(t).forEach(function(e){t.texImage2D(e,0,u,f,c,o)}):t.texImage2D(e,0,u,f,c,o),d(t,a),t.generateMipmap(_)),0===m&&i(b.length?b:void 0,p,r)}}i=i||S;var s=a.src;if(6!==s.length)throw"there must be 6 urls for a cubemap";var u=a.internalFormat||a.format||t.RGBA,l=n(u),f=a.format||l.format,c=a.type||t.UNSIGNED_BYTE,_=a.target||t.TEXTURE_2D;if(_!==t.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";I(t,r,a),a=e.shallowCopy(a);var p,m=6,b=[],y=g(t,a);p=s.map(function(t,e){return w(t,a.crossOrigin,o(y[e]))})}function T(t,r,a,i){function o(e){return function(n,o){if(--m,n)b.push(n);else{if(h(t,a),t.bindTexture(_,r),g){g=!1,y=a.width||o.width,v=a.height||o.height,t.texImage3D(_,0,u,y,v,x,0,f,c,null);for(var s=0;s<x;++s)t.texSubImage3D(_,0,0,0,s,y,v,1,f,c,o)}else{var l=o;o.width===y&&o.height===v||(l=B.canvas,B.canvas.width=y,B.canvas.height=v,B.drawImage(o,0,0,y,v)),t.texSubImage3D(_,0,0,0,e,y,v,1,f,c,l),l===B.canvas&&(B.canvas.width=0,B.canvas.height=0)}d(t,a),t.generateMipmap(_)}0===m&&i(b.length?b:void 0,p,r)}}i=i||S;var s=a.src,u=a.internalFormat||a.format||t.RGBA,l=n(u),f=a.format||l.format,c=a.type||t.UNSIGNED_BYTE,_=a.target||t.TEXTURE_2D_ARRAY;if(_!==t.TEXTURE_3D&&_!==t.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";I(t,r,a),a=e.shallowCopy(a);var p,m=s.length,b=[],y=a.width,v=a.height,x=s.length,g=!0;p=s.map(function(t,e){return w(t,a.crossOrigin,o(e))})}function D(e,a,i,o){o=o||O.textureOptions;var s=o.target||e.TEXTURE_2D;e.bindTexture(s,a);var f=o.width,c=o.height,_=o.depth,p=o.internalFormat||o.format||e.RGBA,m=n(p),b=o.format||m.format,y=o.type||u(e,i,m.type);if(C(i))i instanceof Uint8ClampedArray&&(i=new Uint8Array(i.buffer));else{var v=t.getTypedArrayTypeForGLType(y);i=new v(i)}var x=r(p,y),g=i.byteLength/x;if(g%1)throw"length wrong size for format: "+G(e,b);var M;if(s===e.TEXTURE_3D)if(f||c||_)!f||c&&_?!c||f&&_?(M=l(e,s,f,c,g/_),f=M.width,c=M.height):(M=l(e,s,f,_,g/c),f=M.width,_=M.height):(M=l(e,s,c,_,g/f),c=M.width,_=M.height);else{var S=Math.cbrt(g);if(S%1!=0)throw"can't guess cube size of array of numElements: "+g;f=S,c=S,_=S}else M=l(e,s,f,c,g),f=M.width,c=M.height;return e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment||1),h(e,o),s===e.TEXTURE_CUBE_MAP?function(){var t=x/i.BYTES_PER_ELEMENT,r=g/6*t;E(e,o).forEach(function(t){var n=r*t.ndx,a=i.subarray(n,n+r);e.texImage2D(t.face,0,p,f,c,0,b,y,a)})}():s===e.TEXTURE_3D?e.texImage3D(s,0,p,f,c,_,0,b,y,i):e.texImage2D(s,0,p,f,c,0,b,y,i),d(e,o),{width:f,height:c,depth:_,type:y}}function R(t,e,r){var a=r.target||t.TEXTURE_2D;t.bindTexture(a,e);var i=r.internalFormat||r.format||t.RGBA,o=n(i),s=r.format||o.format,u=r.type||o.type;if(h(t,r),a===t.TEXTURE_CUBE_MAP)for(var l=0;l<6;++l)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,i,r.width,r.height,0,s,u,null);else a===t.TEXTURE_3D?t.texImage3D(a,0,i,r.width,r.height,r.depth,0,s,u,null):t.texImage2D(a,0,i,r.width,r.height,0,s,u,null);d(t,r)}function P(t,e,r){r=r||S,e=e||O.textureOptions;var a=t.createTexture(),i=e.target||t.TEXTURE_2D,o=e.width||1,s=e.height||1,u=e.internalFormat||t.RGBA,l=n(u),f=e.type||l.type;t.bindTexture(i,a),i===t.TEXTURE_CUBE_MAP&&(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));var c=e.src;if(c)if("function"==typeof c&&(c=c(t,e)),"string"==typeof c)F(t,a,e,r);else if(C(c)||Array.isArray(c)&&("number"==typeof c[0]||Array.isArray(c[0])||C(c[0]))){var h=D(t,a,c,e);o=h.width,s=h.height,f=h.type}else if(Array.isArray(c)&&"string"==typeof c[0])i===t.TEXTURE_CUBE_MAP?A(t,a,e,r):T(t,a,e,r);else{if(!(c instanceof HTMLElement))throw"unsupported src type";M(t,a,c,e),o=c.width,s=c.height}else R(t,a,e);return!1!==e.auto&&x(t,a,e,o,s,u,f),p(t,a,e),a}function U(t,e,r,a,i){a=a||r.width,i=i||r.height;var o=r.target||t.TEXTURE_2D;t.bindTexture(o,e);var s,l=r.internalFormat||r.format||t.RGBA,f=n(l),c=r.format||f.format,h=r.src;if(s=h&&(C(h)||Array.isArray(h)&&"number"==typeof h[0])?r.type||u(t,h,f.type):r.type||f.type,o===t.TEXTURE_CUBE_MAP)for(var d=0;d<6;++d)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,c,a,i,0,c,s,null);else t.texImage2D(o,0,c,a,i,0,c,s,null)}function k(t){return"string"==typeof t||Array.isArray(t)&&"string"==typeof t[0]}function z(t,e,r){function n(){0===a&&setTimeout(function(){r(i.length?i:void 0,o,s)},0)}r=r||S;var a=0,i=[],o={},s={};return Object.keys(e).forEach(function(r){var u,l=e[r];k(l.src)&&(u=function(t,e,o){s[r]=o,--a,t&&i.push(t),n()},++a),o[r]=P(t,l,u)}),n(),o}var O={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},C=t.isArrayBuffer,B=document.createElement("canvas").getContext("2d"),N=6407,L=33319,X={},V=X;V[6406]={numColorComponents:1},V[6409]={numColorComponents:1},V[6410]={numColorComponents:2},V[N]={numColorComponents:3},V[6408]={numColorComponents:4},V[6403]={numColorComponents:1},V[36244]={numColorComponents:1},V[L]={numColorComponents:2},V[33320]={numColorComponents:2},V[N]={numColorComponents:3},V[36248]={numColorComponents:3},V[6408]={numColorComponents:4},V[36249]={numColorComponents:4},V[6402]={numColorComponents:1},V[34041]={numColorComponents:2};var Z={};!function(){var t=Z;t[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},t[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},t[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},t[N]={textureFormat:N,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},t[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},t[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},t[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},t[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},t[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},t[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},t[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},t[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},t[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},t[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},t[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},t[33323]={textureFormat:L,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},t[36757]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},t[33327]={textureFormat:L,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},t[33328]={textureFormat:L,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},t[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},t[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},t[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},t[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},t[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},t[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},t[32849]={textureFormat:N,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},t[35905]={textureFormat:N,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},t[36194]={textureFormat:N,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},t[36758]={textureFormat:N,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},t[35898]={textureFormat:N,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},t[35901]={textureFormat:N,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},t[34843]={textureFormat:N,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},t[34837]={textureFormat:N,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},t[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},t[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},t[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},t[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},t[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},t[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},t[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},t[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},t[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},t[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},t[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},t[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},t[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},t[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},t[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},t[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},t[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},t[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},t[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},t[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},t[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},t[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},t[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},t[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},t[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},t[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(t).forEach(function(e){var r=t[e];if(r.bytesPerElementMap={},Array.isArray(r.bytesPerElement))r.bytesPerElement.forEach(function(t,e){var n=r.type[e];r.bytesPerElementMap[n]=t});else{var n=r.type;r.bytesPerElementMap[n]=r.bytesPerElement}})}();var G=function(){function t(t){if(!e){e={};for(var r in t)"number"==typeof t[r]&&(e[t[r]]=r)}}var e;return function(r,n){return t(r),e[n]||"0x"+n.toString(16)}}(),Y={},j=window.WebGLSampler||function(){};return{setDefaults_:c,createSampler:b,createSamplers:y,setSamplerParameters:m,createTexture:P,setEmptyTexture:R,setTextureFromArray:D,loadTextureFromUrl:F,setTextureFromElement:M,setTextureFilteringForSize:x,setTextureParameters:p,setDefaultTextureColor:f,createTextures:z,resizeTexture:U,getNumComponentsForFormat:s,getBytesPerElementForInternalFormat:r}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(6)],void 0!==(a=function(t){"use strict";function e(e,r,n){var a=e.createVertexArray();return e.bindVertexArray(a),r.length||(r=[r]),r.forEach(function(r){t.setBuffersAndAttributes(e,r,n)}),e.bindVertexArray(null),{numElements:n.numElements,elementType:n.elementType,vertexArrayObject:a}}function r(e,r,n,a){var i=e.createVertexArray();return e.bindVertexArray(i),t.setAttributes(r,n),a&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bindVertexArray(null),i}function n(t,e,n){return r(t,e.attribSetters||e,n.attribs,n.indices)}return{createVertexArrayInfo:e,createVAOAndSetAttributes:r,createVAOFromBufferInfo:n}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(11)],void 0!==(a=function(t){"use strict";function e(t){var e=R;return R=t,e}function r(t,e){return e=e||new R(16),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e}function n(t,e){return e=e||new R(16),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t){return t=t||new R(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function i(t,e){if((e=e||new R(16))===t){var r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,e}var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=t[9],d=t[10],_=t[11],p=t[12],m=t[13],b=t[14],y=t[15];return e[0]=n,e[1]=s,e[2]=c,e[3]=p,e[4]=a,e[5]=u,e[6]=h,e[7]=m,e[8]=i,e[9]=l,e[10]=d,e[11]=b,e[12]=o,e[13]=f,e[14]=_,e[15]=y,e}function o(t,e){e=e||new R(16);var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],l=t[7],f=t[8],c=t[9],h=t[10],d=t[11],_=t[12],p=t[13],m=t[14],b=t[15],y=h*b,v=m*d,x=u*b,g=m*l,E=u*d,M=h*l,S=a*b,w=m*i,I=a*d,F=h*i,A=a*l,T=u*i,D=f*p,P=_*c,U=o*p,k=_*s,z=o*c,O=f*s,C=r*p,B=_*n,N=r*c,L=f*n,X=r*s,V=o*n,Z=y*s+g*c+E*p-(v*s+x*c+M*p),G=v*n+S*c+F*p-(y*n+w*c+I*p),Y=x*n+w*s+A*p-(g*n+S*s+T*p),j=M*n+I*s+T*c-(E*n+F*s+A*c),H=1/(r*Z+o*G+f*Y+_*j);return e[0]=H*Z,e[1]=H*G,e[2]=H*Y,e[3]=H*j,e[4]=H*(v*o+x*f+M*_-(y*o+g*f+E*_)),e[5]=H*(y*r+w*f+I*_-(v*r+S*f+F*_)),e[6]=H*(g*r+S*o+T*_-(x*r+w*o+A*_)),e[7]=H*(E*r+F*o+A*f-(M*r+I*o+T*f)),e[8]=H*(D*l+k*d+z*b-(P*l+U*d+O*b)),e[9]=H*(P*i+C*d+L*b-(D*i+B*d+N*b)),e[10]=H*(U*i+B*l+X*b-(k*i+C*l+V*b)),e[11]=H*(O*i+N*l+V*d-(z*i+L*l+X*d)),e[12]=H*(U*h+O*m+P*u-(z*m+D*u+k*h)),e[13]=H*(N*m+D*a+B*h-(C*h+L*m+P*a)),e[14]=H*(C*u+V*m+k*a-(X*m+U*a+B*u)),e[15]=H*(X*h+z*a+L*u-(N*u+V*h+O*a)),e}function s(t,e,r){r=r||new R(16);var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=t[9],d=t[10],_=t[11],p=t[12],m=t[13],b=t[14],y=t[15],v=e[0],x=e[1],g=e[2],E=e[3],M=e[4],S=e[5],w=e[6],I=e[7],F=e[8],A=e[9],T=e[10],D=e[11],P=e[12],U=e[13],k=e[14],z=e[15];return r[0]=n*v+s*x+c*g+p*E,r[1]=a*v+u*x+h*g+m*E,r[2]=i*v+l*x+d*g+b*E,r[3]=o*v+f*x+_*g+y*E,r[4]=n*M+s*S+c*w+p*I,r[5]=a*M+u*S+h*w+m*I,r[6]=i*M+l*S+d*w+b*I,r[7]=o*M+f*S+_*w+y*I,r[8]=n*F+s*A+c*T+p*D,r[9]=a*F+u*A+h*T+m*D,r[10]=i*F+l*A+d*T+b*D,r[11]=o*F+f*A+_*T+y*D,r[12]=n*P+s*U+c*k+p*z,r[13]=a*P+u*U+h*k+m*z,r[14]=i*P+l*U+d*k+b*z,r[15]=o*P+f*U+_*k+y*z,r}function u(t,e,r){return r=r||a(),t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]),r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function l(e,r){return r=r||t.create(),r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function f(e,r,n){n=n||t.create();var a=4*r;return n[0]=e[a+0],n[1]=e[a+1],n[2]=e[a+2],n}function c(t,e,r,a){a!==t&&(a=n(t,a));var i=4*r;return a[i+0]=e[0],a[i+1]=e[1],a[i+2]=e[2],a}function h(t,e,r,n,a){a=a||new R(16);var i=Math.tan(.5*Math.PI-.5*t),o=1/(r-n);return a[0]=i/e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(r+n)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=r*n*o*2,a[15]=0,a}function d(t,e,r,n,a,i,o){return o=o||new R(16),o[0]=2/(e-t),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/(n-r),o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=-1/(i-a),o[11]=0,o[12]=(e+t)/(t-e),o[13]=(n+r)/(r-n),o[14]=-a/(a-i),o[15]=1,o}function _(t,e,r,n,a,i,o){o=o||new R(16);var s=e-t,u=n-r,l=a-i;return o[0]=2*a/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*a/u,o[6]=0,o[7]=0,o[8]=(t+e)/s,o[9]=(n+r)/u,o[10]=i/l,o[11]=-1,o[12]=0,o[13]=0,o[14]=a*i/l,o[15]=0,o}function p(e,r,n,a){a=a||new R(16);var i=P,o=U,s=k;return t.normalize(t.subtract(e,r,s),s),t.normalize(t.cross(n,s,i),i),t.normalize(t.cross(s,i,o),o),a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=0,a[4]=o[0],a[5]=o[1],a[6]=o[2],a[7]=0,a[8]=s[0],a[9]=s[1],a[10]=s[2],a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}function m(t,e){return e=e||new R(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function b(t,e,r){r=r||new R(16);var n=e[0],a=e[1],i=e[2],o=t[0],s=t[1],u=t[2],l=t[3],f=t[4],c=t[5],h=t[6],d=t[7],_=t[8],p=t[9],m=t[10],b=t[11],y=t[12],v=t[13],x=t[14],g=t[15];return t!==r&&(r[0]=o,r[1]=s,r[2]=u,r[3]=l,r[4]=f,r[5]=c,r[6]=h,r[7]=d,r[8]=_,r[9]=p,r[10]=m,r[11]=b),r[12]=o*n+f*a+_*i+y,r[13]=s*n+c*a+p*i+v,r[14]=u*n+h*a+m*i+x,r[15]=l*n+d*a+b*i+g,r}function y(t,e){e=e||new R(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(t,e,r){r=r||new R(16);var n=t[4],a=t[5],i=t[6],o=t[7],s=t[8],u=t[9],l=t[10],f=t[11],c=Math.cos(e),h=Math.sin(e);return r[4]=c*n+h*s,r[5]=c*a+h*u,r[6]=c*i+h*l,r[7]=c*o+h*f,r[8]=c*s-h*n,r[9]=c*u-h*a,r[10]=c*l-h*i,r[11]=c*f-h*o,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}function x(t,e){e=e||new R(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function g(t,e,r){r=r||new R(16);var n=t[0],a=t[1],i=t[2],o=t[3],s=t[8],u=t[9],l=t[10],f=t[11],c=Math.cos(e),h=Math.sin(e);return r[0]=c*n-h*s,r[1]=c*a-h*u,r[2]=c*i-h*l,r[3]=c*o-h*f,r[8]=c*s+h*n,r[9]=c*u+h*a,r[10]=c*l+h*i,r[11]=c*f+h*o,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}function E(t,e){e=e||new R(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(t,e,r){r=r||new R(16);var n=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=Math.cos(e),h=Math.sin(e);return r[0]=c*n+h*s,r[1]=c*a+h*u,r[2]=c*i+h*l,r[3]=c*o+h*f,r[4]=c*s-h*n,r[5]=c*u-h*a,r[6]=c*l-h*i,r[7]=c*f-h*o,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}function S(t,e,r){r=r||new R(16);var n=t[0],a=t[1],i=t[2],o=Math.sqrt(n*n+a*a+i*i);n/=o,a/=o,i/=o;var s=n*n,u=a*a,l=i*i,f=Math.cos(e),c=Math.sin(e),h=1-f;return r[0]=s+(1-s)*f,r[1]=n*a*h+i*c,r[2]=n*i*h-a*c,r[3]=0,r[4]=n*a*h-i*c,r[5]=u+(1-u)*f,r[6]=a*i*h+n*c,r[7]=0,r[8]=n*i*h+a*c,r[9]=a*i*h-n*c,r[10]=l+(1-l)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function w(t,e,r,n){n=n||new R(16);var a=e[0],i=e[1],o=e[2],s=Math.sqrt(a*a+i*i+o*o);a/=s,i/=s,o/=s;var u=a*a,l=i*i,f=o*o,c=Math.cos(r),h=Math.sin(r),d=1-c,_=u+(1-u)*c,p=a*i*d+o*h,m=a*o*d-i*h,b=a*i*d-o*h,y=l+(1-l)*c,v=i*o*d+a*h,x=a*o*d+i*h,g=i*o*d-a*h,E=f+(1-f)*c,M=t[0],S=t[1],w=t[2],I=t[3],F=t[4],A=t[5],T=t[6],D=t[7],P=t[8],U=t[9],k=t[10],z=t[11];return n[0]=_*M+p*F+m*P,n[1]=_*S+p*A+m*U,n[2]=_*w+p*T+m*k,n[3]=_*I+p*D+m*z,n[4]=b*M+y*F+v*P,n[5]=b*S+y*A+v*U,n[6]=b*w+y*T+v*k,n[7]=b*I+y*D+v*z,n[8]=x*M+g*F+E*P,n[9]=x*S+g*A+E*U,n[10]=x*w+g*T+E*k,n[11]=x*I+g*D+E*z,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n}function I(t,e){return e=e||new R(16),e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(t,e,r){r=r||new R(16);var n=e[0],a=e[1],i=e[2];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=n*t[3],r[4]=a*t[4],r[5]=a*t[5],r[6]=a*t[6],r[7]=a*t[7],r[8]=i*t[8],r[9]=i*t[9],r[10]=i*t[10],r[11]=i*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r}function A(e,r,n){n=n||t.create();var a=r[0],i=r[1],o=r[2],s=a*e[3]+i*e[7]+o*e[11]+e[15];return n[0]=(a*e[0]+i*e[4]+o*e[8]+e[12])/s,n[1]=(a*e[1]+i*e[5]+o*e[9]+e[13])/s,n[2]=(a*e[2]+i*e[6]+o*e[10]+e[14])/s,n}function T(e,r,n){n=n||t.create();var a=r[0],i=r[1],o=r[2];return n[0]=a*e[0]+i*e[4]+o*e[8],n[1]=a*e[1]+i*e[5]+o*e[9],n[2]=a*e[2]+i*e[6]+o*e[10],n}function D(e,r,n){n=n||t.create();var a=o(e),i=r[0],s=r[1],u=r[2];return n[0]=i*a[0]+s*a[1]+u*a[2],n[1]=i*a[4]+s*a[5]+u*a[6],n[2]=i*a[8]+s*a[9]+u*a[10],n}var R=Float32Array,P=t.create(),U=t.create(),k=t.create();return{axisRotate:w,axisRotation:S,create:a,copy:n,frustum:_,getAxis:f,getTranslation:l,identity:a,inverse:o,lookAt:p,multiply:s,negate:r,ortho:d,perspective:h,rotateX:v,rotateY:g,rotateZ:M,rotateAxis:w,rotationX:y,rotationY:x,rotationZ:E,scale:F,scaling:I,setAxis:c,setDefaultType:e,setTranslation:u,transformDirection:T,transformNormal:D,transformPoint:A,translate:b,translation:m,transpose:i}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[],void 0!==(a=function(){"use strict";function t(t){var e=y;return y=t,e}function e(t,e,r){var n=new y(3);return t&&(n[0]=t),e&&(n[1]=e),r&&(n[2]=r),n}function r(t,e,r){return r=r||new y(3),r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function n(t,e,r){return r=r||new y(3),r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function a(t,e,r,n){return n=n||new y(3),n[0]=(1-r)*t[0]+r*e[0],n[1]=(1-r)*t[1]+r*e[1],n[2]=(1-r)*t[2]+r*e[2],n}function i(t,e,r){return r=r||new y(3),r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r}function o(t,e,r){return r=r||new y(3),r[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e,r}function s(t,e,r){r=r||new y(3);var n=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=n,r[2]=a,r}function u(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function l(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function f(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function c(t,e){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(r*r+n*n+a*a)}function h(t,e){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function d(t,e){e=e||new y(3);var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=Math.sqrt(r);return n>1e-5?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=0,e[1]=0,e[2]=0),e}function _(t,e){return e=e||new y(3),e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function p(t,e){return e=e||new y(3),e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function m(t,e,r){return r=r||new y(3),r[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}function b(t,e,r){return r=r||new y(3),r[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r}var y=Float32Array;return{add:r,copy:p,create:e,cross:s,distance:c,distanceSq:h,divide:b,divScalar:o,dot:u,lerp:a,length:l,lengthSq:f,mulScalar:i,multiply:m,negate:_,normalize:d,setDefaultType:t,subtract:n}}.apply(e,n))&&(t.exports=a)},function(t,e,r){var n,a;n=[r(2),r(4),r(10),r(11)],void 0!==(a=function(t,e,r,n){"use strict";function a(t,e){var r=0;return t.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||n.buffer&&n.buffer instanceof ArrayBuffer)for(var a=0;a<n.length;++a)t[r++]=n[a];else t[r++]=n}},t.reset=function(t){r=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function i(t,e,r){return a(new(r||Float32Array)(t*e),t)}function o(t){return"indices"!==t}function s(t){function e(e){for(var o=t[e],s=o.numComponents,u=i(s,a,o.constructor),l=0;l<a;++l)for(var f=r[l],c=f*s,h=0;h<s;++h)u.push(o[c+h]);n[e]=u}var r=t.indices,n={},a=r.length;return Object.keys(t).filter(o).forEach(e),n}function u(t){if(t.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=t.normal,r=e.length,n=0;n<r;n+=9){var a=e[n+0],i=e[n+1],o=e[n+2],s=e[n+3],u=e[n+4],l=e[n+5],f=e[n+6],c=e[n+7],h=e[n+8],d=a+s+f,_=i+u+c,p=o+l+h,m=Math.sqrt(d*d+_*_+p*p);d/=m,_/=m,p/=m,e[n+0]=d,e[n+1]=_,e[n+2]=p,e[n+3]=d,e[n+4]=_,e[n+5]=p,e[n+6]=d,e[n+7]=_,e[n+8]=p}return t}function l(t,e,r){for(var n=t.length,a=new Float32Array(3),i=0;i<n;i+=3)r(e,[t[i],t[i+1],t[i+2]],a),t[i]=a[0],t[i+1]=a[1],t[i+2]=a[2]}function f(t,e,r){r=r||n.create();var a=e[0],i=e[1],o=e[2];return r[0]=a*t[0]+i*t[1]+o*t[2],r[1]=a*t[4]+i*t[5]+o*t[6],r[2]=a*t[8]+i*t[9]+o*t[10],r}function c(t,e){return l(t,e,r.transformDirection),t}function h(t,e){return l(t,r.inverse(e),f),t}function d(t,e){return l(t,e,r.transformPoint),t}function _(t,e){return Object.keys(t).forEach(function(r){var n=t[r];r.indexOf("pos")>=0?d(n,e):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?c(n,e):r.indexOf("norm")>=0&&h(n,e)}),t}function p(t,e,r){return t=t||2,e=e||0,r=r||0,t*=.5,{position:{numComponents:2,data:[e+-1*t,r+-1*t,e+1*t,r+-1*t,e+-1*t,r+1*t,e+1*t,r+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function m(t,e,n,a,o){t=t||1,e=e||1,n=n||1,a=a||1,o=o||r.identity();for(var s=(n+1)*(a+1),u=i(3,s),l=i(3,s),f=i(2,s),c=0;c<=a;c++)for(var h=0;h<=n;h++){var d=h/n,p=c/a;u.push(t*d-.5*t,0,e*p-.5*e),l.push(0,1,0),f.push(d,p)}for(var m=n+1,b=i(3,n*a*2,Uint16Array),c=0;c<a;c++)for(var h=0;h<n;h++)b.push((c+0)*m+h,(c+1)*m+h,(c+0)*m+h+1),b.push((c+1)*m+h,(c+1)*m+h+1,(c+0)*m+h+1);return _({position:u,normal:l,texcoord:f,indices:b},o)}function b(t,e,r,n,a,o,s){if(e<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||Math.PI,o=o||0,s=s||2*Math.PI;for(var u=a-n,l=s-o,f=(e+1)*(r+1),c=i(3,f),h=i(3,f),d=i(2,f),_=0;_<=r;_++)for(var p=0;p<=e;p++){var m=p/e,b=_/r,y=l*m,v=u*b,x=Math.sin(y),g=Math.cos(y),E=Math.sin(v),M=Math.cos(v),S=g*E,w=M,I=x*E;c.push(t*S,t*w,t*I),h.push(S,w,I),d.push(1-m,b)}for(var F=e+1,A=i(3,e*r*2,Uint16Array),p=0;p<e;p++)for(var _=0;_<r;_++)A.push((_+0)*F+p,(_+0)*F+p+1,(_+1)*F+p),A.push((_+1)*F+p,(_+0)*F+p+1,(_+1)*F+p+1);return{position:c,normal:h,texcoord:d,indices:A}}function y(t){t=t||1;for(var e=t/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=i(3,24),s=i(3,24),u=i(2,24),l=i(3,12,Uint16Array),f=0;f<6;++f){for(var c=O[f],h=0;h<4;++h){var d=r[c[h]],_=n[f],p=a[h];o.push(d),s.push(_),u.push(p)}var m=4*f;l.push(m+0,m+1,m+2),l.push(m+0,m+2,m+3)}return{position:o,normal:s,texcoord:u,indices:l}}function v(t,e,r,n,a,o,s){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(a<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===o||o,l=void 0===s||s,f=(u?2:0)+(l?2:0),c=(n+1)*(a+1+f),h=i(3,c),d=i(3,c),_=i(2,c),p=i(3,n*(a+f)*2,Uint16Array),m=n+1,b=Math.atan2(t-e,r),y=Math.cos(b),v=Math.sin(b),x=u?-2:0,g=a+(l?2:0),E=x;E<=g;++E){var M,S=E/a,w=r*S;E<0?(w=0,S=1,M=t):E>a?(w=r,S=1,M=e):M=t+E/a*(e-t),-2!==E&&E!==a+2||(M=0,S=0),w-=r/2;for(var I=0;I<m;++I){var F=Math.sin(I*Math.PI*2/n),A=Math.cos(I*Math.PI*2/n);h.push(F*M,w,A*M),d.push(E<0||E>a?0:F*y,E<0?-1:E>a?1:v,E<0||E>a?0:A*y),_.push(I/n,1-S)}}for(var E=0;E<a+f;++E)for(var I=0;I<n;++I)p.push(m*(E+0)+0+I,m*(E+0)+1+I,m*(E+1)+1+I),p.push(m*(E+0)+0+I,m*(E+1)+1+I,m*(E+1)+0+I);return{position:h,normal:d,texcoord:_,indices:p}}function x(t,e){e=e||[];for(var r=[],n=0;n<t.length;n+=4){var a=t[n],i=t.slice(n+1,n+4);i.push.apply(i,e);for(var o=0;o<a;++o)r.push.apply(r,i)}return r}function g(){var t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=[.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0],r=x([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=x([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),a=t.length/3,o={position:i(3,a),texcoord:i(2,a),normal:i(3,a),color:i(4,a,Uint8Array),indices:i(3,a/3,Uint16Array)};o.position.push(t),o.texcoord.push(e),o.normal.push(r),o.color.push(n);for(var s=0;s<a;++s)o.indices.push(s);return o}function E(t,e,r,a,o,s,u){function l(t,e,r){return t+(e-t)*r}function f(e,r,i,u,f,c){for(var _=0;_<=o;_++){var y=r/(h-1),v=_/o,x=2*(y-.5),g=(s+v*d)*Math.PI,E=Math.sin(g),M=Math.cos(g),S=l(t,e,E),w=x*a,I=M*t,F=E*S;p.push(w,I,F);var A=n.add(n.multiply([0,E,M],i),u);m.push(A),b.push(y*f+c,v)}}function c(t,e){for(var r=0;r<o;++r)x.push(t+r+0,t+r+1,e+r+0),x.push(t+r+1,e+r+1,e+r+0)}if(o<=0)throw Error("subdivisionDown must be > 0");s=s||0,u=u||1;for(var h=2,d=u-s,_=2*(o+1)*(2+h),p=i(3,_),m=i(3,_),b=i(2,_),y=0;y<h;y++){var v=2*(y/(h-1)-.5);f(e,y,[1,1,1],[0,0,0],1,0),f(e,y,[0,0,0],[v,0,0],0,0),f(r,y,[1,1,1],[0,0,0],1,0),f(r,y,[0,0,0],[v,0,0],0,1)}var x=i(3,2*o*(2+h),Uint16Array),g=o+1;return c(0*g,4*g),c(5*g,7*g),c(6*g,2*g),c(3*g,1*g),{position:p,normal:m,texcoord:b,indices:x}}function M(t,e,r,n,a,i){return v(t,t,e,r,n,a,i)}function S(t,e,r,n,a,o){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");a=a||0,o=o||2*Math.PI;for(var s=o-a,u=r+1,l=n+1,f=u*l,c=i(3,f),h=i(3,f),d=i(2,f),_=i(3,r*n*2,Uint16Array),p=0;p<l;++p)for(var m=p/n,b=m*Math.PI*2,y=Math.sin(b),v=t+y*e,x=Math.cos(b),g=x*e,E=0;E<u;++E){var M=E/r,S=a+M*s,w=Math.sin(S),I=Math.cos(S),F=w*v,A=I*v,T=w*y,D=I*y;c.push(F,g,A),h.push(T,x,D),d.push(M,1-m)}for(var p=0;p<n;++p)for(var E=0;E<r;++E){var R=1+E,P=1+p;_.push(u*p+E,u*P+E,u*p+R),_.push(u*P+E,u*P+R,u*p+R)}return{position:c,normal:h,texcoord:d,indices:_}}function w(t,e,r,n,a){if(e<3)throw Error("divisions must be at least 3");r=r||1,a=a||1,n=n||0;for(var o=(e+1)*(r+1),s=i(3,o),u=i(3,o),l=i(2,o),f=i(3,r*e*2,Uint16Array),c=0,h=t-n,d=e+1,_=0;_<=r;++_){for(var p=n+h*Math.pow(_/r,a),m=0;m<=e;++m){var b=2*Math.PI*m/e,y=p*Math.cos(b),v=p*Math.sin(b);if(s.push(y,0,v),u.push(0,1,0),l.push(1-m/e,_/r),_>0&&m!==e){var x=c+(m+1),g=c+m,E=c+m-d,M=c+(m+1)-d;f.push(x,g,E),f.push(x,E,M)}}c+=e+1}return{position:s,normal:u,texcoord:l,indices:f}}function I(t){return Math.random()*t|0}function F(t,e){e=e||{};var r=t.position.numElements,n=i(4,r,Uint8Array),a=e.rand||function(t,e){return e<3?I(256):255};if(t.color=n,t.indices)for(var o=0;o<r;++o)n.push(a(o,0),a(o,1),a(o,2),a(o,3));else for(var s=e.vertsPerColor||3,u=r/s,o=0;o<u;++o)for(var l=[a(o,0),a(o,1),a(o,2),a(o,3)],f=0;f<s;++f)n.push(l);return t}function A(e){return function(r){var n=e.apply(this,Array.prototype.slice.call(arguments,1));return t.createBuffersFromArrays(r,n)}}function T(e){return function(r){var n=e.apply(null,Array.prototype.slice.call(arguments,1));return t.createBufferInfoFromArrays(r,n)}}function D(t,e,r,n){n=n||0;for(var a=t.length,i=0;i<a;++i)e[r+i]=t[i]+n}function R(t,r){var n=k(t),i=new n.constructor(r),o=i;return n.numComponents&&n.numElements&&a(i,n.numComponents),t.data&&(o={data:i},e.copyNamedProperties(C,t,o)),o}function P(t){function e(e){for(var r,n=0,a=0;a<t.length;++a){var i=t[a],o=i[e];n+=k(o).length,r&&!o.data||(r=o)}return{length:n,spec:r}}function r(e,r,n){for(var a=0,i=0,o=0;o<t.length;++o){var s=t[o],u=s[e],l=k(u);"indices"===e?(D(l,n,i,a),a+=r[o]):D(l,n,i),i+=l.length}}for(var n,a={},i=0;i<t.length;++i){var o=t[i];Object.keys(o).forEach(function(t){a[t]||(a[t]=[]),n||"indices"===t||(n=t);var e=o[t],r=z(e,t),i=k(e),s=i.length/r;a[t].push(s)})}var s=a[n],u={};return Object.keys(a).forEach(function(t){var n=e(t),a=R(n.spec,n.length);r(t,s,k(a)),u[t]=a}),u}function U(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r],a=k(n),i=R(n,a.length);D(a,k(i),0),e[r]=i}),e}var k=t.getArray_,z=t.getNumComponents_,O=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]],C=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];return{create3DFBufferInfo:T(g),create3DFBuffers:A(g),create3DFVertices:g,createAugmentedTypedArray:i,createCubeBufferInfo:T(y),createCubeBuffers:A(y),createCubeVertices:y,createPlaneBufferInfo:T(m),createPlaneBuffers:A(m),createPlaneVertices:m,createSphereBufferInfo:T(b),createSphereBuffers:A(b),createSphereVertices:b,createTruncatedConeBufferInfo:T(v),createTruncatedConeBuffers:A(v),createTruncatedConeVertices:v,createXYQuadBufferInfo:T(p),createXYQuadBuffers:A(p),createXYQuadVertices:p,createCresentBufferInfo:T(E),createCresentBuffers:A(E),createCresentVertices:E,createCylinderBufferInfo:T(M),createCylinderBuffers:A(M),createCylinderVertices:M,createTorusBufferInfo:T(S),createTorusBuffers:A(S),createTorusVertices:S,createDiscBufferInfo:T(w),createDiscBuffers:A(w),createDiscVertices:w,deindexVertices:s,flattenNormals:u,makeRandomVertexColors:F,reorientDirections:c,reorientNormals:h,reorientPositions:d,reorientVertices:_,concatVertices:P,duplicateVertices:U}}.apply(e,n))&&(t.exports=a)}])})},function(t,e,r){e.glMatrix=r(1),e.mat2=r(21),e.mat2d=r(22),e.mat3=r(11),e.mat4=r(23),e.quat=r(24),e.vec2=r(25),e.vec3=r(12),e.vec4=r(13)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),a=r(7),i=r(4),o=r(27),s=n.VERTEX_SIZE_SHORT,u=s+1,l=2*n.VERTEX_SIZE_SHORT,f=l+1,c=3*n.VERTEX_SIZE_SHORT,h=c+1,d=n.OFFSET_Z_INDEX,_=n.VERTEX_SIZE+n.OFFSET_Z_INDEX,p=2*n.VERTEX_SIZE+n.OFFSET_Z_INDEX,m=3*n.VERTEX_SIZE+n.OFFSET_Z_INDEX,b=n.OFFSET_PAL_SHIFT,y=n.VERTEX_SIZE+n.OFFSET_PAL_SHIFT,v=2*n.VERTEX_SIZE+n.OFFSET_PAL_SHIFT,x=3*n.VERTEX_SIZE+n.OFFSET_PAL_SHIFT,g=n.OFFSET_UV,E=g+1,M=n.VERTEX_SIZE+n.OFFSET_UV,S=M+1,w=2*n.VERTEX_SIZE+n.OFFSET_UV,I=w+1,F=3*n.VERTEX_SIZE+n.OFFSET_UV,A=F+1,T=function(){function t(t,e,r,n){this._id=t,this._buffer=e,this.tag={},this._isDirty=!0,this._transform=r||new a.Transform2d,n&&e.setAttributes(t,n.x,n.y,n.x+n.w,n.y+n.h,n.textureX,n.textureY,n.textureX+n.w,n.textureY+n.h,n.z,n.palOffset),this._options=n||e.getAttributeInfo(t)}return Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._options.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._options.y},enumerable:!0,configurable:!0}),t.prototype.update=function(){if(this._transform.isDirty||this._isDirty){var t=this._options,e=this._transform.matrix,r=this._id;this._buffer.setPositionTransformed(r,t.x,t.y,t.x+t.w,t.y+t.h,e),this._buffer.setZ(r,t.z||1),this._buffer.setPalShift(r,t.palOffset||0),this._buffer.setUv(r,t.textureX,t.textureY,t.textureX+t.w,t.textureY+t.h),this._isDirty=!1}},t.prototype.center=function(){this._transform.ox=this._options.x+this._options.w/2,this._transform.oy=this._options.y+this._options.h/2},t}(),D=function(){function t(t,e){void 0===e&&(e=16),this._gl=t,this._capacity=e,this._dirty_start=n.HUGE,this._dirty_end=0,this._data=new ArrayBuffer(e*n.VERTICES_QUAD*n.VERTEX_SIZE),this._shortView=new Uint16Array(this._data),this._byteView=new Uint8Array(this._data),this._indices=new Uint16Array(e*n.INDICES_QUAD)}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._dirty_end-this._dirty_start>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferInfo",{get:function(){if(!this._bufferInfo)throw"Buffer not created. Did you forget to call create(...)?";return this._bufferInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._range},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertexSize",{get:function(){return this._range*n.INDICES_QUAD},enumerable:!0,configurable:!0}),t.prototype.update=function(){if(this._sprites&&this._sprites.forEach(function(t){return t.update()}),this.isDirty){var t=this._gl,e=this.bufferInfo.attribs.position.buffer,r=new Uint8Array(this._data,this._dirty_start,this._dirty_end-this._dirty_start);t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferSubData(t.ARRAY_BUFFER,this._dirty_start,r),this._dirty_start=n.HUGE,this._dirty_end=0}},t.prototype.destroy=function(){this._gl.deleteBuffer(this._bufferInfo.attribs.position.buffer),this._gl.deleteBuffer(this._bufferInfo.attribs.texcoord.buffer),this._gl.deleteBuffer(this._bufferInfo.attribs.indices.buffer),this._indices=null,this._shortView=null,this._byteView=null,this._data=null},Object.defineProperty(t.prototype,"range",{set:function(t){this._range=t,this._bufferInfo&&(this._bufferInfo.numElements=t*n.INDICES_QUAD)},enumerable:!0,configurable:!0}),t.prototype.create=function(){var t=i.createBufferFromTypedArray(this._gl,this._data,this._gl.ARRAY_BUFFER,this._gl.DYNAMIC_DRAW),e=new o.IndexBuffer(this._gl);return this._bufferInfo={numElements:this._range?this._range*n.INDICES_QUAD:this._indices.length,indices:e.buffer,elementType:e.elementType,attribs:{position:{buffer:t,numComponents:n.COMP_POS,type:this._gl.UNSIGNED_SHORT,stride:n.VERTEX_SIZE,offset:0},z_index:{buffer:t,numComponents:n.COMP_Z_INDEX,type:this._gl.UNSIGNED_BYTE,stride:n.VERTEX_SIZE,offset:n.OFFSET_Z_INDEX,normalize:!1},pal_shift:{buffer:t,numComponents:n.COMP_PAL_PAL_SHIFT,type:this._gl.UNSIGNED_BYTE,stride:n.VERTEX_SIZE,offset:n.OFFSET_PAL_SHIFT,normalize:!0},texcoord:{buffer:t,numComponents:n.COMP_UV,type:this._gl.UNSIGNED_BYTE,stride:n.VERTEX_SIZE,offset:n.OFFSET_UV,normalize:!1}}},this._range=0,this._dirty_start=n.HUGE,this._dirty_end=0,this},t.prototype.setPosition=function(t,e,r,a,i){var o=t*n.QUAD_SIZE_SHORT,d=this._shortView;d[o+0]=e,d[o+1]=r,d[o+s]=a,d[o+u]=r,d[o+l]=a,d[o+f]=i,d[o+c]=e,d[o+h]=i,this.setQuadDirty(o)},t.prototype.setPositionTransformed=function(t,e,r,a,i,o){var d=t*n.QUAD_SIZE_SHORT,_=this._shortView;_[d+0]=o[0]*e+o[4]*r+o[12],_[d+1]=o[1]*e+o[5]*r+o[13],_[d+s]=o[0]*a+o[4]*r+o[12],_[d+u]=o[1]*a+o[5]*r+o[13],_[d+l]=o[0]*a+o[4]*i+o[12],_[d+f]=o[1]*a+o[5]*i+o[13],_[d+c]=o[0]*e+o[4]*i+o[12],_[d+h]=o[1]*e+o[5]*i+o[13]},t.prototype.setUv=function(t,e,r,a,i){var o=t*n.QUAD_SIZE,s=this._byteView;s[o+g]=e,s[o+E]=r,s[o+M]=a-1,s[o+S]=r,s[o+w]=a-1,s[o+I]=i-1,s[o+F]=e,s[o+A]=i-1,this.setQuadDirty(o)},t.prototype.setPalShift=function(t,e){var r=t*n.QUAD_SIZE,a=this._byteView;a[r+b]=e,a[r+y]=e,a[r+v]=e,a[r+x]=e,this.setQuadDirty(r)},t.prototype.getPalShift=function(t){return this._byteView[t*n.QUAD_SIZE+b]},t.prototype.setZ=function(t,e){var r=t*n.QUAD_SIZE,a=this._byteView;a[r+d]=e,a[r+_]=e,a[r+p]=e,a[r+m]=e,this.setQuadDirty(r)},t.prototype.getZ=function(t){return this._byteView[t*n.QUAD_SIZE+d]},t.prototype.setAttributes=function(t,e,r,a,i,o,T,D,R,P,U){var k=t*n.QUAD_SIZE_SHORT,z=t*n.QUAD_SIZE,O=this._shortView,C=this._byteView;O[k+0]=e,O[k+1]=r,C[z+d]=P,C[z+b]=U,C[z+g]=o,C[z+E]=T,O[k+s]=a,O[k+u]=r,C[z+_]=P,C[z+y]=U,C[z+M]=D-1,C[z+S]=T,O[k+l]=a,O[k+f]=i,C[z+p]=P,C[z+v]=U,C[z+w]=D-1,C[z+I]=R-1,O[k+c]=e,O[k+h]=i,C[z+m]=P,C[z+x]=U,C[z+F]=o,C[z+A]=R-1,this.setQuadDirty(z)},t.prototype.add=function(){return this._range>=this._capacity&&this._resize(2*this._capacity),this._range++},t.prototype.addMany=function(t){for(var e=[],r=0;r<t;r++)e.push(this.add())},t.prototype.getAttributeInfo=function(t){var e=t*n.QUAD_SIZE_SHORT,r=t*n.QUAD_SIZE,a=this._shortView,i=this._byteView;return{x:a[e+0],y:a[e+1],w:a[e+l]-a[e+0],h:a[e+f]-a[e+1],z:i[r+d],palOffset:i[r+b],textureX:i[r+g],textureY:i[r+E]}},t.prototype.setAttributeBytes=function(t,e){var r=t*n.QUAD_SIZE;this._byteView.set(e,r),this.setQuadDirty(r)},t.prototype.getAttributeBytes=function(t,e){var r=t*n.QUAD_SIZE;return new Uint8Array(this._data,r,n.QUAD_SIZE)},t.prototype.clearQuad=function(t){this.setAttributes(0,0,0,0,0,0,0,0,0,0,0)},t.prototype.setQuadDirty=function(t){this._dirty_start=Math.min(t,this._dirty_start),this._dirty_end=Math.max(t+n.QUAD_SIZE,this._dirty_end)},t.prototype.setAllDirty=function(){this._dirty_start=0,this._dirty_end=this._range*n.QUAD_SIZE},t.prototype.createSprite=function(t,e,r){var n=new T(t,this,e,r);return this._sprites=this._sprites||[],this._sprites.push(n),n},t.prototype._resize=function(t){if(t>n.MAX_QUADS)throw"Maximum quads per buffer ("+n.MAX_QUADS+") exceeded: "+t;this._capacity=t;var e=this.bufferInfo.attribs.position.buffer;console.log("resize buffer to "+t);var r=new ArrayBuffer(t*n.QUAD_SIZE),a=new Uint8Array(r);a.set(this._byteView),this._shortView=new Uint16Array(r),this._byteView=a,this._data=r,this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e),this._gl.bufferData(this._gl.ARRAY_BUFFER,this._data,this._gl.DYNAMIC_DRAW)},t.prototype._vec2Transform=function(t,e,r,n){void 0===n&&(n=0),this._shortView[n]=r[0]*t+r[4]*e+r[12],this._shortView[n+1]=r[1]*t+r[5]*e+r[13]},t}();e.QuadBuffer=D},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),a=function(){function t(){this._dirty=!0,this._rDirty=!0,this._matrix=n.mat4.create(),this._quat=n.quat.create(),this._trans=n.vec3.fromValues(0,0,0),this._origin=n.vec3.fromValues(0,0,0),this._scale=n.vec3.fromValues(1,1,1),this._axis=n.vec3.fromValues(0,0,1),this._angle=0}return Object.defineProperty(t.prototype,"matrix",{get:function(){return this._dirty&&this._buildMatrix(),this._buildMatrix(),this._matrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._trans[0]},set:function(t){this._trans[0]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._trans[1]},set:function(t){this._trans[1]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._trans[2]},set:function(t){this._trans[2]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rot",{get:function(){return this._angle},set:function(t){this._angle=t,this._rDirty=!0,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sx",{get:function(){return this._scale[0]},set:function(t){this._scale[0]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sy",{get:function(){return this._scale[1]},set:function(t){this._scale[1]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ox",{get:function(){return this._origin[0]},set:function(t){this._origin[0]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oy",{get:function(){return this._origin[1]},set:function(t){this._origin[1]=t,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._dirty&&this._buildMatrix()},t.prototype._buildMatrix=function(){this._rDirty&&this._buildQuat(),n.mat4.fromRotationTranslationScaleOrigin(this._matrix,this._quat,this._trans,this._scale,this._origin),this._dirty=!1},t.prototype._buildQuat=function(){n.quat.setAxisAngle(this._quat,this._axis,this._angle),this._rDirty=!1},t}();e.Transform2d=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),a=r(4);!function(t){t[t.R=0]="R",t[t.G=1]="G",t[t.B=2]="B",t[t.A=3]="A"}(e.ColorComponent||(e.ColorComponent={}));var i=function(){function t(t){this._gl=t,this._dirtyStart=n.HUGE,this._dirtyEnd=0,this._texdata=new Uint8Array(n.TEXTURE_SIZE*n.TEXTURE_SIZE*this._components)}return Object.defineProperty(t.prototype,"texture",{get:function(){if(!this._texture)throw"No texture available. Did you forget to call create(...)?";return this._texture},enumerable:!0,configurable:!0}),t.prototype.getRawData=function(){return this._texdata},t.prototype.setRawData=function(t){this._texdata=t,this.setAllDirty()},Object.defineProperty(t.prototype,"colorDepth",{get:function(){switch(this._options.format){case this._gl.RGBA:return 32;case this._gl.LUMINANCE:case this._gl.ALPHA:return 8;case this._gl.RGB:return 24}},enumerable:!0,configurable:!0}),t.prototype.setDataFunc=function(t){for(var e=this._texdata,r=(Math.floor,this._components),a=0;a<e.length;a++){var i=a%r,o=Math.floor((a-i)/r);e[a]=t(o%n.TEXTURE_SIZE,Math.floor(o/n.TEXTURE_SIZE),a%r)}this.setAllDirty()},t.prototype.create=function(){return this._texture=a.createTexture(this._gl,this._options),this._dirtyEnd=0,this._dirtyStart=n.HUGE,this},t.prototype.update=function(){var t=this._dirtyEnd-this._dirtyStart;if(t>0){var e=this._options,r=new Uint8Array(this._texdata.buffer,this._dirtyStart,t),a=this._components*n.TEXTURE_SIZE,i=Math.floor(this._dirtyStart/a),o=Math.floor(t/a);console.log(0,i,256,o),this._gl.bindTexture(e.target,this.texture),this._gl.texSubImage2D(e.target,0,0,i,256,o,e.format,e.type,r),this._dirtyEnd=0,this._dirtyStart=n.HUGE}},t.prototype.setAllDirty=function(){this._dirtyStart=0,this._dirtyEnd=this._texdata.length},t.prototype.getPixel=function(t,e){for(var r=this._components,a=new Array(r),i=(e*n.TEXTURE_SIZE+t)*r,o=0;o<r;o++)a[o]=this._texdata[i+o];return a},t.prototype.setPixel=function(t,e,r){var a=this._components;if(r.length!=a)throw"Color needs to be an array with length "+a;for(var i=(e*n.TEXTURE_SIZE+t)*a,o=0;o<a;o++)this._texdata[i+o]=r[o];this.setRowDirty(e)},t.prototype.setRowDirty=function(t){var e=t*n.TEXTURE_SIZE*this._components;this._dirtyStart=Math.min(this._dirtyStart,e),this._dirtyEnd=Math.max(this._dirtyEnd,e+n.TEXTURE_SIZE*this._components)},t}();e.PixelTexture=i},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);n.__exportStar(r(0),e),n.__exportStar(r(26),e),n.__exportStar(r(6),e),n.__exportStar(r(28),e),n.__exportStar(r(29),e),n.__exportStar(r(30),e),n.__exportStar(r(31),e),n.__exportStar(r(7),e),n.__exportStar(r(8),e),n.__exportStar(r(32),e),n.__exportStar(r(33),e)},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,r,a,i,o,s,u,l){var f=new n.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=r,f[3]=a,f[4]=i,f[5]=o,f[6]=s,f[7]=u,f[8]=l,f},a.set=function(t,e,r,n,a,i,o,s,u,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],l=e[7],f=e[8],c=f*o-s*l,h=-f*i+s*u,d=l*i-o*u,_=r*c+n*h+a*d;return _?(_=1/_,t[0]=c*_,t[1]=(-f*n+a*l)*_,t[2]=(s*n-a*o)*_,t[3]=h*_,t[4]=(f*r-a*u)*_,t[5]=(-s*r+a*i)*_,t[6]=d*_,t[7]=(-l*r+n*u)*_,t[8]=(o*r-n*i)*_,t):null},a.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],l=e[7],f=e[8];return t[0]=o*f-s*l,t[1]=a*l-n*f,t[2]=n*s-a*o,t[3]=s*u-i*f,t[4]=r*f-a*u,t[5]=a*i-r*s,t[6]=i*l-o*u,t[7]=n*u-r*l,t[8]=r*o-n*i,t},a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],l=t[8];return e*(l*i-o*u)+r*(-l*a+o*s)+n*(u*a-i*s)},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1],_=r[2],p=r[3],m=r[4],b=r[5],y=r[6],v=r[7],x=r[8];return t[0]=h*n+d*o+_*l,t[1]=h*a+d*s+_*f,t[2]=h*i+d*u+_*c,t[3]=p*n+m*o+b*l,t[4]=p*a+m*s+b*f,t[5]=p*i+m*u+b*c,t[6]=y*n+v*o+x*l,t[7]=y*a+v*s+x*f,t[8]=y*i+v*u+x*c,t},a.mul=a.multiply,a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=h*n+d*o+l,t[7]=h*a+d*s+f,t[8]=h*i+d*u+c,t},a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*o,t[1]=d*a+h*s,t[2]=d*i+h*u,t[3]=d*o-h*n,t[4]=d*s-h*a,t[5]=d*u-h*i,t[6]=l,t[7]=f,t[8]=c,t},a.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,s=n+n,u=a+a,l=r*o,f=n*o,c=n*s,h=a*o,d=a*s,_=a*u,p=i*o,m=i*s,b=i*u;return t[0]=1-c-_,t[3]=f-b,t[6]=h+m,t[1]=f+b,t[4]=1-l-_,t[7]=d-p,t[2]=h-m,t[5]=d+p,t[8]=1-l-c,t},a.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],l=e[7],f=e[8],c=e[9],h=e[10],d=e[11],_=e[12],p=e[13],m=e[14],b=e[15],y=r*s-n*o,v=r*u-a*o,x=r*l-i*o,g=n*u-a*s,E=n*l-i*s,M=a*l-i*u,S=f*p-c*_,w=f*m-h*_,I=f*b-d*_,F=c*m-h*p,A=c*b-d*p,T=h*b-d*m,D=y*T-v*A+x*F+g*I-E*w+M*S;return D?(D=1/D,t[0]=(s*T-u*A+l*F)*D,t[1]=(u*I-o*T-l*w)*D,t[2]=(o*A-s*I+l*S)*D,t[3]=(a*A-n*T-i*F)*D,t[4]=(r*T-a*I+i*w)*D,t[5]=(n*I-r*A-i*S)*D,t[6]=(p*M-m*E+b*g)*D,t[7]=(m*x-_*M-b*v)*D,t[8]=(_*E-p*x+b*y)*D,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=e[0],d=e[1],_=e[2],p=e[3],m=e[4],b=e[5],y=t[6],v=e[7],x=e[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-d)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-_)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-b)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(l-y)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-v)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(c-x)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,r){var a=new n.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=r,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],s=r[1],u=r[2];return t[0]=a*u-i*s,t[1]=i*o-n*u,t[2]=n*s-a*o,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t},a.hermite=function(t,e,r,n,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,l=o*(i-1),f=o*(3-2*i);return t[0]=e[0]*s+r[0]*u+n[0]*l+a[0]*f,t[1]=e[1]*s+r[1]*u+n[1]*l+a[1]*f,t[2]=e[2]*s+r[2]*u+n[2]*l+a[2]*f,t},a.bezier=function(t,e,r,n,a,i){var o=1-i,s=o*o,u=i*i,l=s*o,f=3*i*s,c=3*u*o,h=u*i;return t[0]=e[0]*l+r[0]*f+n[0]*c+a[0]*h,t[1]=e[1]*l+r[1]*f+n[1]*c+a[1]*h,t[2]=e[2]*l+r[2]*f+n[2]*c+a[2]*h,t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,a=2*n.RANDOM()-1,i=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=a*e,t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],s=r[1],u=r[2],l=r[3],f=l*n+s*i-u*a,c=l*a+u*n-o*i,h=l*i+o*a-s*n,d=-o*n-s*a-u*i;return t[0]=f*l+d*-o+c*-u-h*-s,t[1]=c*l+d*-s+h*-o-f*-u,t[2]=h*l+d*-u+f*-s-c*-o,t},a.rotateX=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateY=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateZ=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,o){var s,u;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),a.angle=function(t,e){var r=a.fromValues(t[0],t[1],t[2]),n=a.fromValues(e[0],e[1],e[2]);a.normalize(r,r),a.normalize(n,n);var i=a.dot(r,n);return i>1?0:Math.acos(i)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=e[0],s=e[1],u=e[2];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=i*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],s=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t},a.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],s=r[1],u=r[2],l=r[3],f=l*n+s*i-u*a,c=l*a+u*n-o*i,h=l*i+o*a-s*n,d=-o*n-s*a-u*i;return t[0]=f*l+d*-o+c*-u-h*-s,t[1]=c*l+d*-s+h*-o-f*-u,t[2]=h*l+d*-u+f*-s-c*-o,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,o){var s,u;for(r||(r=4),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=t[3],s=e[0],u=e[1],l=e[2],f=e[3];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))},t.exports=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Header=1229472850]="Header",t[t.Palette=1347179589]="Palette",t[t.Data=1229209940]="Data",t[t.End=1229278788]="End",t[t.Transparency=1951551059]="Transparency"}(e.ChunkType||(e.ChunkType={}));!function(t){t[t.Greyscale=0]="Greyscale",t[t.Truecolor=2]="Truecolor",t[t.Indexed=3]="Indexed",t[t.GreyscaleAlpha=4]="GreyscaleAlpha",t[t.TruecolorAlpha=6]="TruecolorAlpha"}(e.ColorType||(e.ColorType={}));!function(t){t[t.None=0]="None",t[t.Sub=1]="Sub",t[t.Up=2]="Up",t[t.Average=3]="Average",t[t.Paeth=4]="Paeth"}(e.PngFilter||(e.PngFilter={})),e.SIGN_OFFSET=8,e.LENGTH_LENGTH=4,e.TYPE_LENGTH=4,e.CRC_LENGTH=4},function(t,e,r){"use strict";function n(t,e,r,n){for(var a=65535&t|0,i=t>>>16&65535|0,o=0;0!==r;){o=r>2e3?2e3:r,r-=o;do{a=a+e[n++]|0,i=i+a|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}t.exports=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=a,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}var a=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=n},function(t,e,r){"use strict";function n(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,a.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var a=r(3),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new a.Buf8(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;s[254]=s[254]=1,e.string2buf=function(t){var e,r,n,i,o,s=t.length,u=0;for(i=0;i<s;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new a.Buf8(u),o=0,i=0;o<u;i++)r=t.charCodeAt(i),55296==(64512&r)&&i+1<s&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},e.buf2binstring=function(t){return n(t,t.length)},e.binstring2buf=function(t){for(var e=new a.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,a,i,o,u=e||t.length,l=new Array(2*u);for(a=0,r=0;r<u;)if((i=t[r++])<128)l[a++]=i;else if((o=s[i])>4)l[a++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<u;)i=i<<6|63&t[r++],o--;o>1?l[a++]=65533:i<65536?l[a++]=i:(i-=65536,l[a++]=55296|i>>10&1023,l[a++]=56320|1023&i)}return n(l,a)},e.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+s[t[r]]>e?r:e}},function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(10),i=r(35),o=r(4),s=r(36),u=r(37),l=r(38);window.onerror=function(t){return alert(t)};var f,c,h,d,_=0;!function(){n.__awaiter(this,void 0,void 0,function(){function t(r){e.begin(),_+=.1,P*=.9,I.forEach(function(t){return t.transform.y=3*Math.sin(t.x/4+_)});var n=T.createSprite(T.add(),new a.Transform2d,{w:1,h:1,palOffset:0,textureX:32,textureY:0,x:1,y:1,z:250});n.tag.dx=Math.random(),n.tag.dy=Math.random(),D.push(n),D.forEach(function(t){(t.transform.x>320||t.transform.x<0)&&(t.tag.dx=-t.tag.dx),(t.transform.y>180||t.transform.y<0)&&(t.tag.dy=-t.tag.dy),t.transform.x+=t.tag.dx,t.transform.y+=t.tag.dy}),c.render(),e.end(),requestAnimationFrame(t)}var e,p,m,b,y,v,x,g,E,M,S,w,I,F,A,T,D,R,P,U,k;return n.__generator(this,function(n){for(e=new s,e.showPanel(0),document.body.appendChild(e.dom),f=i.initWebGl(),p=r(49),m=r(50),b=o.createProgramInfo(f,[p,m]),y=new a.PaletteTexture(f),v=new l.PngReader(u.stringToBuffer(r(51))),x=new a.IndexedTexture(f),x.setRawData(v.createPixelData()),x.create(),y.setRawPalette(0,v.createPaletteDataRgba(256)),g=new l.PngReader(u.stringToBuffer(r(52))),E=new a.IndexedTexture(f),E.setRawData(g.createPixelData()),E.create(),M=g.createPaletteDataRgba(256),y.setRawPalette(1,M),y.setPalColor(1,7,[255,255,255,0]),y.create(),S=r(53),c=new a.Renderer(f,{shader:b,palette:y.texture,texture:E.texture,paletteId:0,zSort:!0,blendMode:"none"}),h=i.createTileSprite(f,x,y,0),w=new a.TextBuffer(f,S).create(),w.write("Start Game",320,130,50,4,4),w.write("Load Game",320,130,66,4),w.write("Settings",320,130,82,4),w.write("Quit",320,130,98,4),d=new a.Renderable({buffer:w,texture:E.texture,paletteId:1,palette:y.texture,zSort:!0}),I=[],F=0;F<"Start Game".length;F++)A=w.createSprite(F),I.push(A);return T=new a.QuadBuffer(f).create(),D=[],R=new a.Renderable({buffer:T,texture:x.texture,paletteId:0,palette:y.texture}),c.renderList.push(h),c.renderList.push(d),c.renderList.push(R),P=.5,requestAnimationFrame(t),U=0,k=0,setInterval(function(){},16),[2]})})}()},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*i-a*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-a*o,t[3]=r*o,t):null},a.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1],l=r[2],f=r[3];return t[0]=n*s+i*u,t[1]=a*s+o*u,t[2]=n*l+i*f,t[3]=a*l+o*f,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=a*u+o*s,t[2]=n*-s+i*u,t[3]=a*-s+o*u,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=a*s,t[2]=i*u,t[3]=o*u,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=t[3],s=e[0],u=e[1],l=e[2],f=e[3];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))},a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},t.exports=a},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,r,a,i,o){var s=new n.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=r,s[3]=a,s[4]=i,s[5]=o,s},a.set=function(t,e,r,n,a,i,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=r*i-n*a;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-a*u,t[3]=r*u,t[4]=(a*s-i*o)*u,t[5]=(n*o-r*s)*u,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=r[0],f=r[1],c=r[2],h=r[3],d=r[4],_=r[5];return t[0]=n*l+i*f,t[1]=a*l+o*f,t[2]=n*c+i*h,t[3]=a*c+o*h,t[4]=n*d+i*_+s,t[5]=a*d+o*_+u,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*l,t[1]=a*f+o*l,t[2]=n*-l+i*f,t[3]=a*-l+o*f,t[4]=s,t[5]=u,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=r[0],f=r[1];return t[0]=n*l,t[1]=a*l,t[2]=i*f,t[3]=o*f,t[4]=s,t[5]=u,t},a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=n*l+i*f+s,t[5]=a*l+o*f+u,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=e[0],f=e[1],c=e[2],h=e[3],d=e[4],_=e[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-_)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))},t.exports=a},function(t,e,r){var n=r(1),a={scalar:{},SIMD:{}};a.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,r,a,i,o,s,u,l,f,c,h,d,_,p,m){var b=new n.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=a,b[4]=i,b[5]=o,b[6]=s,b[7]=u,b[8]=l,b[9]=f,b[10]=c,b[11]=h,b[12]=d,b[13]=_,b[14]=p,b[15]=m,b},a.set=function(t,e,r,n,a,i,o,s,u,l,f,c,h,d,_,p,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t[9]=f,t[10]=c,t[11]=h,t[12]=d,t[13]=_,t[14]=p,t[15]=m,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var r,n,a,i,o,s,u,l,f,c;return r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4.shuffle(r,n,0,1,4,5),s=SIMD.Float32x4.shuffle(a,i,0,1,4,5),u=SIMD.Float32x4.shuffle(o,s,0,2,4,6),l=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,l),o=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(a,i,2,3,6,7),f=SIMD.Float32x4.shuffle(o,s,0,2,4,6),c=SIMD.Float32x4.shuffle(o,s,1,3,5,7),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,c),t},a.transpose=n.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],l=e[7],f=e[8],c=e[9],h=e[10],d=e[11],_=e[12],p=e[13],m=e[14],b=e[15],y=r*s-n*o,v=r*u-a*o,x=r*l-i*o,g=n*u-a*s,E=n*l-i*s,M=a*l-i*u,S=f*p-c*_,w=f*m-h*_,I=f*b-d*_,F=c*m-h*p,A=c*b-d*p,T=h*b-d*m,D=y*T-v*A+x*F+g*I-E*w+M*S;return D?(D=1/D,t[0]=(s*T-u*A+l*F)*D,t[1]=(a*A-n*T-i*F)*D,t[2]=(p*M-m*E+b*g)*D,t[3]=(h*E-c*M-d*g)*D,t[4]=(u*I-o*T-l*w)*D,t[5]=(r*T-a*I+i*w)*D,t[6]=(m*x-_*M-b*v)*D,t[7]=(f*M-h*x+d*v)*D,t[8]=(o*A-s*I+l*S)*D,t[9]=(n*I-r*A-i*S)*D,t[10]=(_*E-p*x+b*y)*D,t[11]=(c*x-f*E-d*y)*D,t[12]=(s*w-o*F-u*S)*D,t[13]=(r*F-n*w+a*S)*D,t[14]=(p*v-_*g-m*y)*D,t[15]=(f*g-c*v+h*y)*D,t):null},a.SIMD.invert=function(t,e){var r,n,a,i,o,s,u,l,f,c,h=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),_=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return o=SIMD.Float32x4.shuffle(h,d,0,1,4,5),n=SIMD.Float32x4.shuffle(_,p,0,1,4,5),r=SIMD.Float32x4.shuffle(o,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,o,1,3,5,7),o=SIMD.Float32x4.shuffle(h,d,2,3,6,7),i=SIMD.Float32x4.shuffle(_,p,2,3,6,7),a=SIMD.Float32x4.shuffle(o,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,o,1,3,5,7),o=SIMD.Float32x4.mul(a,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.mul(n,o),u=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,o),s),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.mul(n,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),s),f=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,o)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),o=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),s),l=SIMD.Float32x4.mul(r,o),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,o)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,o),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),o=SIMD.Float32x4.mul(r,n),o=SIMD.Float32x4.swizzle(o,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),f),o=SIMD.Float32x4.swizzle(o,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,o)),o=SIMD.Float32x4.mul(r,i),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,o)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),l),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.mul(r,a),o=SIMD.Float32x4.swizzle(o,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),u),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(n,o)),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,o)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,o),f),c=SIMD.Float32x4.mul(r,s),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),o=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(o,o),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(o,o))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,f)),t):null},a.invert=n.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],l=e[7],f=e[8],c=e[9],h=e[10],d=e[11],_=e[12],p=e[13],m=e[14],b=e[15];return t[0]=s*(h*b-d*m)-c*(u*b-l*m)+p*(u*d-l*h),t[1]=-(n*(h*b-d*m)-c*(a*b-i*m)+p*(a*d-i*h)),t[2]=n*(u*b-l*m)-s*(a*b-i*m)+p*(a*l-i*u),t[3]=-(n*(u*d-l*h)-s*(a*d-i*h)+c*(a*l-i*u)),t[4]=-(o*(h*b-d*m)-f*(u*b-l*m)+_*(u*d-l*h)),t[5]=r*(h*b-d*m)-f*(a*b-i*m)+_*(a*d-i*h),t[6]=-(r*(u*b-l*m)-o*(a*b-i*m)+_*(a*l-i*u)),t[7]=r*(u*d-l*h)-o*(a*d-i*h)+f*(a*l-i*u),t[8]=o*(c*b-d*p)-f*(s*b-l*p)+_*(s*d-l*c),t[9]=-(r*(c*b-d*p)-f*(n*b-i*p)+_*(n*d-i*c)),t[10]=r*(s*b-l*p)-o*(n*b-i*p)+_*(n*l-i*s),t[11]=-(r*(s*d-l*c)-o*(n*d-i*c)+f*(n*l-i*s)),t[12]=-(o*(c*m-h*p)-f*(s*m-u*p)+_*(s*h-u*c)),t[13]=r*(c*m-h*p)-f*(n*m-a*p)+_*(n*h-a*c),t[14]=-(r*(s*m-u*p)-o*(n*m-a*p)+_*(n*u-a*s)),t[15]=r*(s*h-u*c)-o*(n*h-a*c)+f*(n*u-a*s),t},a.SIMD.adjoint=function(t,e){var r,n,a,i,o,s,u,l,f,c,h,d,_,r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12);return f=SIMD.Float32x4.shuffle(r,n,0,1,4,5),s=SIMD.Float32x4.shuffle(a,i,0,1,4,5),o=SIMD.Float32x4.shuffle(f,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,f,1,3,5,7),f=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(a,i,2,3,6,7),u=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(u,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.mul(s,f),h=SIMD.Float32x4.mul(o,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),c),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,f),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.mul(s,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),_=SIMD.Float32x4.mul(o,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),_=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,f),_),_=SIMD.Float32x4.swizzle(_,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),c),d=SIMD.Float32x4.mul(o,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,f)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(o,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),_=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),_),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),d),_=SIMD.Float32x4.sub(_,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.mul(o,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,f)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),d),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.mul(o,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),_=SIMD.Float32x4.sub(_,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,f)),_=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),_),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,_),t},a.adjoint=n.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],l=t[8],f=t[9],c=t[10],h=t[11],d=t[12],_=t[13],p=t[14],m=t[15];return(e*o-r*i)*(c*m-h*p)-(e*s-n*i)*(f*m-h*_)+(e*u-a*i)*(f*p-c*_)+(r*s-n*o)*(l*m-h*d)-(r*u-a*o)*(l*p-c*d)+(n*u-a*s)*(l*_-f*d)},a.SIMD.multiply=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(r,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),o))));SIMD.Float32x4.store(t,0,u);var l=SIMD.Float32x4.load(r,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),o))));SIMD.Float32x4.store(t,4,f);var c=SIMD.Float32x4.load(r,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),o))));SIMD.Float32x4.store(t,8,h);var d=SIMD.Float32x4.load(r,12),_=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),o))));return SIMD.Float32x4.store(t,12,_),t},a.scalar.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=e[9],d=e[10],_=e[11],p=e[12],m=e[13],b=e[14],y=e[15],v=r[0],x=r[1],g=r[2],E=r[3];return t[0]=v*n+x*s+g*c+E*p,t[1]=v*a+x*u+g*h+E*m,t[2]=v*i+x*l+g*d+E*b,t[3]=v*o+x*f+g*_+E*y,v=r[4],x=r[5],g=r[6],E=r[7],t[4]=v*n+x*s+g*c+E*p,t[5]=v*a+x*u+g*h+E*m,t[6]=v*i+x*l+g*d+E*b,t[7]=v*o+x*f+g*_+E*y,v=r[8],x=r[9],g=r[10],E=r[11],t[8]=v*n+x*s+g*c+E*p,t[9]=v*a+x*u+g*h+E*m,t[10]=v*i+x*l+g*d+E*b,t[11]=v*o+x*f+g*_+E*y,v=r[12],x=r[13],g=r[14],E=r[15],t[12]=v*n+x*s+g*c+E*p,t[13]=v*a+x*u+g*h+E*m,t[14]=v*i+x*l+g*d+E*b,t[15]=v*o+x*f+g*_+E*y,t},a.multiply=n.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,r){var n,a,i,o,s,u,l,f,c,h,d,_,p=r[0],m=r[1],b=r[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*b+e[12],t[13]=e[1]*p+e[5]*m+e[9]*b+e[13],t[14]=e[2]*p+e[6]*m+e[10]*b+e[14],t[15]=e[3]*p+e[7]*m+e[11]*b+e[15]):(n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=e[9],d=e[10],_=e[11],t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=l,t[7]=f,t[8]=c,t[9]=h,t[10]=d,t[11]=_,t[12]=n*p+s*m+c*b+e[12],t[13]=a*p+u*m+h*b+e[13],t[14]=i*p+l*m+d*b+e[14],t[15]=o*p+f*m+_*b+e[15]),t},a.SIMD.translate=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,2,2,2,2));var u=SIMD.Float32x4.add(n,SIMD.Float32x4.add(a,SIMD.Float32x4.add(i,o)));return SIMD.Float32x4.store(t,12,u),t},a.translate=n.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,r){var n,a,i,o=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(o,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(o,1,1,1,1))),i=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=n.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,r,a){var i,o,s,u,l,f,c,h,d,_,p,m,b,y,v,x,g,E,M,S,w,I,F,A,T=a[0],D=a[1],R=a[2],P=Math.sqrt(T*T+D*D+R*R);return Math.abs(P)<n.EPSILON?null:(P=1/P,T*=P,D*=P,R*=P,i=Math.sin(r),o=Math.cos(r),s=1-o,u=e[0],l=e[1],f=e[2],c=e[3],h=e[4],d=e[5],_=e[6],p=e[7],m=e[8],b=e[9],y=e[10],v=e[11],x=T*T*s+o,g=D*T*s+R*i,E=R*T*s-D*i,M=T*D*s-R*i,S=D*D*s+o,w=R*D*s+T*i,I=T*R*s+D*i,F=D*R*s-T*i,A=R*R*s+o,t[0]=u*x+h*g+m*E,t[1]=l*x+d*g+b*E,t[2]=f*x+_*g+y*E,t[3]=c*x+p*g+v*E,t[4]=u*M+h*S+m*w,t[5]=l*M+d*S+b*w,t[6]=f*M+_*S+y*w,t[7]=c*M+p*S+v*w,t[8]=u*I+h*F+m*A,t[9]=l*I+d*F+b*A,t[10]=f*I+_*F+y*A,t[11]=c*I+p*F+v*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],o=e[5],s=e[6],u=e[7],l=e[8],f=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*n,t[5]=o*a+f*n,t[6]=s*a+c*n,t[7]=u*a+h*n,t[8]=l*a-i*n,t[9]=f*a-o*n,t[10]=c*a-s*n,t[11]=h*a-u*n,t},a.SIMD.rotateX=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),t},a.rotateX=n.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],s=e[2],u=e[3],l=e[8],f=e[9],c=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*n,t[1]=o*a-f*n,t[2]=s*a-c*n,t[3]=u*a-h*n,t[8]=i*n+l*a,t[9]=o*n+f*a,t[10]=s*n+c*a,t[11]=u*n+h*a,t},a.SIMD.rotateY=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,a))),t},a.rotateY=n.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],s=e[2],u=e[3],l=e[4],f=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*n,t[1]=o*a+f*n,t[2]=s*a+c*n,t[3]=u*a+h*n,t[4]=l*a-i*n,t[5]=f*a-o*n,t[6]=c*a-s*n,t[7]=h*a-u*n,t},a.SIMD.rotateZ=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),o=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),t},a.rotateZ=n.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,r){var a,i,o,s=r[0],u=r[1],l=r[2],f=Math.sqrt(s*s+u*u+l*l);return Math.abs(f)<n.EPSILON?null:(f=1/f,s*=f,u*=f,l*=f,a=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=s*s*o+i,t[1]=u*s*o+l*a,t[2]=l*s*o-u*a,t[3]=0,t[4]=s*u*o-l*a,t[5]=u*u*o+i,t[6]=l*u*o+s*a,t[7]=0,t[8]=s*l*o+u*a,t[9]=u*l*o-s*a,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=n+n,u=a+a,l=i+i,f=n*s,c=n*u,h=n*l,d=a*u,_=a*l,p=i*l,m=o*s,b=o*u,y=o*l;return t[0]=1-(d+p),t[1]=c+y,t[2]=h-b,t[3]=0,t[4]=c-y,t[5]=1-(f+p),t[6]=_+m,t[7]=0,t[8]=h+b,t[9]=_-m,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},a.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],i=e[1],o=e[2],s=e[3],u=a+a,l=i+i,f=o+o,c=a*u,h=a*l,d=a*f,_=i*l,p=i*f,m=o*f,b=s*u,y=s*l,v=s*f,x=n[0],g=n[1],E=n[2];return t[0]=(1-(_+m))*x,t[1]=(h+v)*x,t[2]=(d-y)*x,t[3]=0,t[4]=(h-v)*g,t[5]=(1-(c+m))*g,t[6]=(p+b)*g,t[7]=0,t[8]=(d+y)*E,t[9]=(p-b)*E,t[10]=(1-(c+_))*E,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var i=e[0],o=e[1],s=e[2],u=e[3],l=i+i,f=o+o,c=s+s,h=i*l,d=i*f,_=i*c,p=o*f,m=o*c,b=s*c,y=u*l,v=u*f,x=u*c,g=n[0],E=n[1],M=n[2],S=a[0],w=a[1],I=a[2];return t[0]=(1-(p+b))*g,t[1]=(d+x)*g,t[2]=(_-v)*g,t[3]=0,t[4]=(d-x)*E,t[5]=(1-(h+b))*E,t[6]=(m+y)*E,t[7]=0,t[8]=(_+v)*M,t[9]=(m-y)*M,t[10]=(1-(h+p))*M,t[11]=0,t[12]=r[0]+S-(t[0]*S+t[4]*w+t[8]*I),t[13]=r[1]+w-(t[1]*S+t[5]*w+t[9]*I),t[14]=r[2]+I-(t[2]*S+t[6]*w+t[10]*I),t[15]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,s=n+n,u=a+a,l=r*o,f=n*o,c=n*s,h=a*o,d=a*s,_=a*u,p=i*o,m=i*s,b=i*u;return t[0]=1-c-_,t[1]=f+b,t[2]=h-m,t[3]=0,t[4]=f-b,t[5]=1-l-_,t[6]=d+p,t[7]=0,t[8]=h+m,t[9]=d-p,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,r,n,a,i,o){var s=1/(r-e),u=1/(a-n),l=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(a+n)*u,t[10]=(o+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*l,t[15]=0,t},a.perspective=function(t,e,r,n,a){var i=1/Math.tan(e/2),o=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*o,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},a.ortho=function(t,e,r,n,a,i,o){var s=1/(e-r),u=1/(n-a),l=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*s,t[13]=(a+n)*u,t[14]=(o+i)*l,t[15]=1,t},a.lookAt=function(t,e,r,i){var o,s,u,l,f,c,h,d,_,p,m=e[0],b=e[1],y=e[2],v=i[0],x=i[1],g=i[2],E=r[0],M=r[1],S=r[2];return Math.abs(m-E)<n.EPSILON&&Math.abs(b-M)<n.EPSILON&&Math.abs(y-S)<n.EPSILON?a.identity(t):(h=m-E,d=b-M,_=y-S,p=1/Math.sqrt(h*h+d*d+_*_),h*=p,d*=p,_*=p,o=x*_-g*d,s=g*h-v*_,u=v*d-x*h,p=Math.sqrt(o*o+s*s+u*u),p?(p=1/p,o*=p,s*=p,u*=p):(o=0,s=0,u=0),l=d*u-_*s,f=_*o-h*u,c=h*s-d*o,p=Math.sqrt(l*l+f*f+c*c),p?(p=1/p,l*=p,f*=p,c*=p):(l=0,f=0,c=0),t[0]=o,t[1]=l,t[2]=h,t[3]=0,t[4]=s,t[5]=f,t[6]=d,t[7]=0,t[8]=u,t[9]=c,t[10]=_,t[11]=0,t[12]=-(o*m+s*b+u*y),t[13]=-(l*m+f*b+c*y),t[14]=-(h*m+d*b+_*y),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],f=t[7],c=t[8],h=t[9],d=t[10],_=t[11],p=t[12],m=t[13],b=t[14],y=t[15],v=e[0],x=e[1],g=e[2],E=e[3],M=e[4],S=e[5],w=e[6],I=e[7],F=e[8],A=e[9],T=e[10],D=e[11],R=e[12],P=e[13],U=e[14],k=e[15];return Math.abs(r-v)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(a-x)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-g)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(o-E)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-M)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-S)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-w)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(f-I)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(c-F)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-A)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-T)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(_-D)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(p-R)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-P)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(b-U)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(y-k)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(k))},t.exports=a},function(t,e,r){var n=r(1),a=r(11),i=r(12),o=r(13),s={};s.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=i.create(),e=i.fromValues(1,0,0),r=i.fromValues(0,1,0);return function(n,a,o){var u=i.dot(a,o);return u<-.999999?(i.cross(t,e,a),i.length(t)<1e-6&&i.cross(t,r,a),i.normalize(t,t),s.setAxisAngle(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(i.cross(t,a,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,s.normalize(n,n))}}(),s.setAxes=function(){var t=a.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=o.clone,s.fromValues=o.fromValues,s.copy=o.copy,s.set=o.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},s.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},s.add=o.add,s.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1],l=r[2],f=r[3];return t[0]=n*f+o*s+a*l-i*u,t[1]=a*f+o*u+i*s-n*l,t[2]=i*f+o*l+n*u-a*s,t[3]=o*f-n*s-a*u-i*l,t},s.mul=s.multiply,s.scale=o.scale,s.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-n*s,t},s.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-i*s,t[1]=a*u+o*s,t[2]=i*u+n*s,t[3]=o*u-a*s,t},s.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=a*u-n*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t},s.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},s.dot=o.dot,s.lerp=o.lerp,s.slerp=function(t,e,r,n){var a,i,o,s,u,l=e[0],f=e[1],c=e[2],h=e[3],d=r[0],_=r[1],p=r[2],m=r[3];return i=l*d+f*_+c*p+h*m,i<0&&(i=-i,d=-d,_=-_,p=-p,m=-m),1-i>1e-6?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-n)*a)/o,u=Math.sin(n*a)/o):(s=1-n,u=n),t[0]=s*l+u*d,t[1]=s*f+u*_,t[2]=s*c+u*p,t[3]=s*h+u*m,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(r,n,a,i,o,u){return s.slerp(t,n,o,u),s.slerp(e,a,i,u),s.slerp(r,t,e,2*u*(1-u)),r}}(),s.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-a*s,t[3]=i*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=o.length,s.len=s.length,s.squaredLength=o.squaredLength,s.sqrLen=s.squaredLength,s.normalize=o.normalize,s.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*i+o]-e[3*o+i])*r,t[i]=(e[3*i+a]+e[3*a+i])*r,t[o]=(e[3*o+a]+e[3*a+o])*r}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=o.exactEquals,s.equals=o.equals,t.exports=s},function(t,e,r){var n=r(1),a={};a.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,r){return t[0]=e,t[1]=r,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},a.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},a.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,o){var s,u;for(r||(r=2),n||(n=0),u=a?Math.min(a*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],i(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var r=t[0],a=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))},t.exports=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),a=r(5),i=function(){function t(t,e){void 0===t&&(t=new ArrayBuffer(n.VERTEX_SIZE*n.VERTICES_QUAD)),void 0===e&&(e=0),this._data=t,this._offset=e,this._pos1=new Uint16Array(this._data,this._offset,2),this._pos2=new Uint16Array(this._data,this._offset+n.VERTEX_SIZE,2),this._pos3=new Uint16Array(this._data,this._offset+2*n.VERTEX_SIZE,2),this._pos4=new Uint16Array(this._data,this._offset+3*n.VERTEX_SIZE,2),this._z_shift1=new Uint8Array(this._data,this._offset+n.OFFSET_Z_INDEX,2),this._z_shift2=new Uint8Array(this._data,this._offset+n.VERTEX_SIZE+n.OFFSET_Z_INDEX,2),this._z_shift3=new Uint8Array(this._data,this._offset+2*n.VERTEX_SIZE+n.OFFSET_Z_INDEX,2),this._z_shift4=new Uint8Array(this._data,this._offset+3*n.VERTEX_SIZE+n.OFFSET_Z_INDEX,2),this._uv1=new Uint8Array(this._data,this._offset+n.OFFSET_UV,2),this._uv2=new Uint8Array(this._data,this._offset+n.VERTEX_SIZE+n.OFFSET_UV,2),this._uv3=new Uint8Array(this._data,this._offset+2*n.VERTEX_SIZE+n.OFFSET_UV,2),this._uv4=new Uint8Array(this._data,this._offset+3*n.VERTEX_SIZE+n.OFFSET_UV,2)}return t.prototype.applyTransform=function(t,e){return void 0===e&&(e=this),a.vec2.transformMat4(e._pos1,this._pos1,t),e},t.prototype.setPos=function(t,e,r,n){this._pos1[0]=t,this._pos1[1]=e,this._pos2[0]=t+r,this._pos2[1]=e,this._pos3[0]=t+r,this._pos3[1]=e+n,this._pos4[0]=t,this._pos4[1]=e+n},t.prototype.setUv=function(t,e,r,n){this._uv1[0]=t,this._uv1[1]=e,this._uv2[0]=t+r,this._uv2[1]=e,this._uv3[0]=t+r,this._uv3[1]=e+n,this._uv4[0]=t,this._uv4[1]=e+n},t.prototype.setZ=function(t){this._z_shift1[0]=t,this._z_shift2[0]=t,this._z_shift3[0]=t,this._z_shift4[0]=t},t.prototype.setPalShift=function(t){this._z_shift1[1]=t,this._z_shift2[1]=t,this._z_shift3[1]=t,this._z_shift4[1]=t},t.prototype.setAttributes=function(t,e,r,n,a,i,o,s,u,l){this.setPos(t,e,r,n),this.setZ(a),this.setPalShift(i),this.setUv(o,s,u,l)},t}();e.Quad=i},function(t,e,r){"use strict";function n(t){i=t.UNSIGNED_SHORT;for(var e=new Uint16Array(s.MAX_VERTICES*s.INDICES_QUAD),r=s.MAX_VERTICES*s.VERTICES_QUAD,n=0,u=0;u<r;u+=s.INDICES_QUAD)e[u]=n,e[u+1]=n+1,e[u+2]=n+3,e[u+3]=n+3,e[u+4]=n+1,e[u+5]=n+2,n+=s.VERTICES_QUAD;a=o.createBufferFromTypedArray(t,e,t.ELEMENT_ARRAY_BUFFER)}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o=r(4),s=r(0),u=function(){function t(t){a||n(t)}return Object.defineProperty(t.prototype,"buffer",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elementType",{get:function(){return i},enumerable:!0,configurable:!0}),t}();e.IndexBuffer=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(7),a=function(){function t(t){this._options=t,t.transform=t.transform||new n.Transform2d,this.paletteId=t.paletteId}return Object.defineProperty(t.prototype,"paletteId",{get:function(){return this._options.paletteId},set:function(t){this._options.paletteId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._options.texture},set:function(t){this._options.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._options.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._options.palette},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shader",{get:function(){return this._options.shader},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._options.transform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zSort",{get:function(){return this._options.zSort},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._options.blendMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mode7",{get:function(){return this._options.mode7},enumerable:!0,configurable:!0}),t}();e.Renderable=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),a=r(5),i=r(4),o=function(){function t(t,e){this._gl=t,this.renderList=[],this._settings={},this.a=0,this._ortho=a.mat4.ortho(a.mat4.create(),0,t.canvas.width,t.canvas.height,0,-256,0),this._projection=a.mat4.perspective(a.mat4.create(),1,1,-255,0),this._view=a.mat4.lookAt(a.mat4.create(),a.vec3.fromValues(0,-1,1.5),a.vec3.fromValues(0,1,.7),a.vec3.fromValues(0,1,0)),this._matrix=a.mat4.create(),this._matrixTemp=a.mat4.create(),this.setDefaults(e)}return t.prototype.setDefaults=function(t){this._defaults=t},t.prototype.render=function(){var t=this;this.renderList.forEach(function(t){return t.buffer.update()}),this._gl.useProgram(this._defaults.shader.program),this.renderList.forEach(function(e){t._setOptions(e),t._buildMatrix(e);var r=t._getUniforms(e);r&&i.setUniforms(t._defaults.shader,r),i.setBuffersAndAttributes(t._gl,t._defaults.shader,e.buffer.bufferInfo),i.drawBufferInfo(t._gl,e.buffer.bufferInfo,t._gl.TRIANGLES,e.buffer.vertexSize)})},t.prototype._setOptions=function(t){var e=void 0!=t.zSort?t.zSort:this._defaults.zSort,r=t.blendMode||this._defaults.blendMode;if(e!=this._settings.zSort&&(e?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._settings.zSort=e),r!=this._settings.blendMode){switch(r){case"alpha":this._gl.enable(this._gl.BLEND),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA);break;default:this._gl.disable(this._gl.BLEND)}this._settings.blendMode=r}},t.prototype._buildMatrix=function(t){var e=t.transform?t.transform.matrix:n.MAT4_IDENT;t.mode7?(a.mat4.mul(this._matrixTemp,this._ortho,e),a.mat4.mul(this._matrix,this._projection,this._view),a.mat4.mul(this._matrix,this._matrix,this._matrixTemp)):a.mat4.mul(this._matrix,this._ortho,e)},t.prototype._getUniforms=function(t){this.a-=1e-4;var e=(this.a,{matrix:this._matrix}),r=t.texture||this._defaults.texture,a=t.palette||this._defaults.palette,i=t.paletteId||this._defaults.paletteId;return r!=this._settings.texture&&(this._settings.texture=e.texture=r),a!=this._settings.palette&&(this._settings.palette=e.palette=a),i!=this._settings.paletteId&&(this._settings.paletteId=i,e.pal_offset=i*n.PAL_OFFSET),e},t}();e.Renderer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(6),i=r(0),o=function(t){function e(e,r,n){var a=t.call(this,e,n)||this;return a._fontInfo=r,a._fontLoookup=[],a._text="",a._ptr=0,a}return n.__extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e.prototype.create=function(e,r,n,a,o){return void 0===r&&(r=i.HUGE),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=i.MIN_Z),this._createFont(),t.prototype.create.call(this),e&&this.write(e,r,n,a,o),this},e.prototype.seek=function(t){this._ptr=t},e.prototype.clear=function(t){for(var e=this._ptr;e<this._ptr+t;e++)this.clearQuad(e);this._ptr+=t},e.prototype.write=function(t,e,r,n,a,o){void 0===e&&(e=i.HUGE),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=i.MIN_Z),void 0===o&&(o=0);for(var s=r,u=n,l=0;l<t.length;l++){var f=this._fontLoookup[t.charCodeAt(l)],c=this._font[f],h=this._font[f+1],d=this._font[f+2],_=this._font[f+3];this.setAttributes(this.add(),s,u,s+d,u+_,c,h,c+d,h+_,a,o),s>e?(u+=_,s=0):s+=d}this._ptr+=t.length},e.prototype._createFont=function(){var t=this._fontInfo,e=t.chars;this._font=new Uint8Array(e.length*i.VERTICES_QUAD);for(var r=i.TEXTURE_SIZE/this._fontInfo.x,n=0;n<e.length;n++){var a=n%r*t.x,o=Math.floor(n/r)*t.y,s=t.widths?t.widths[n]:t.x,u=t.y,l=n*i.VERTICES_QUAD;this._fontLoookup[e.charCodeAt(n)]=l,this._font[l]=a,this._font[l+1]=o,this._font[l+2]=s,this._font[l+3]=u}},e}(a.QuadBuffer);e.TextBuffer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(0),i=r(6),o=function(t){function e(e,r,n,a,i){void 0===a&&(a=16),void 0===i&&(i=16);var o=t.call(this,e,r*n)||this;return o._width=r,o._height=n,o._twidth=a,o._theight=i,o}return n.__extends(e,t),e.prototype.create=function(e,r){return void 0===r&&(r=a.MIN_Z),this._createTileset(),e&&this.setTiles(e,r),t.prototype.create.call(this),this.addMany(this._width*this._height),this},e.prototype.setTile=function(t,e,r,n){void 0===n&&(n=a.MIN_Z);var i=r*this._width+e;return this.setTileSeq(i,t),this},e.prototype.setTiles=function(t,e){void 0===e&&(e=a.MIN_Z);for(var r=0;r<t.length;r++)this.setTileSeq(r,t[r],e);return this},e.prototype.setTileSeq=function(t,e,r){if(void 0===r&&(r=a.MIN_Z),0==e)return void this.setAttributes(t,0,0,0,0,0,0,0,0,0,0);var n=this._tileset,i=e*a.VERTICES_QUAD,o=t%this._width*this._twidth,s=Math.floor(t/this._width)*this._theight,u=o+this._twidth,l=s+this._theight;this.setAttributes(t,o,s,u,l,n[i],n[i+1],n[i+2],n[i+3],r,0)},e.prototype._createTileset=function(){for(var t=0,e=new Uint8Array(a.TEXTURE_SIZE/this._twidth*(a.TEXTURE_SIZE/this._theight)*a.VERTICES_QUAD),r=0;r<a.TEXTURE_SIZE;r+=this._twidth)for(var n=0;n<a.TEXTURE_SIZE;n+=this._theight)e[t++]=n,e[t++]=r,e[t++]=n+this._twidth,e[t++]=r+this._theight;this._tileset=e},e.prototype._createGeometry=function(){},e}(i.QuadBuffer);e.TileBuffer=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(0),i=r(8),o=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),Object.defineProperty(e.prototype,"_components",{get:function(){return a.COMP_INDEXED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_options",{get:function(){return{target:this._gl.TEXTURE_2D,width:a.TEXTURE_SIZE,height:a.TEXTURE_SIZE,min:this._gl.NEAREST,mag:this._gl.NEAREST,src:this._texdata,format:this._gl.LUMINANCE,type:this._gl.UNSIGNED_BYTE}},enumerable:!0,configurable:!0}),e}(i.PixelTexture);e.IndexedTexture=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(34),i=r(0),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.setPalFunc=function(t,e){for(var r=this._texdata,n=(Math.floor,this._components),a=t*i.TEXTURE_SIZE*n,o=a+i.TEXTURE_SIZE*n,s=a;s<o;s++){var u=s%i.COMP_RGBA,l=Math.floor((s-u)/n);r[s]=e(l%256,s%n)}this.setPalDirty(t)},e.prototype.setRawPalette=function(t,e){for(var r=this._components*i.TEXTURE_SIZE*t,n=0;n<e.length;n++)this._texdata[r+n]=e[n]},e.prototype.setPalDirty=function(t){this.setRowDirty(t)},e.prototype.setIndex=function(t,e,r){return this.setPixel(e,t,r)},e.prototype.getIndex=function(t,e){return this.getPixel(e,t)},e.prototype.setPalColor=function(t,e,r){this.setPixel(e,t,r),this.setPalDirty(t)},e.prototype.shift=function(t,e,r){for(var n=r-e,a=0;a<n;a++)this.switchColors(t,e+a,r)},e.prototype.switchColors=function(t,e,r){var n=this.getIndex(t,e);this.setIndex(t,e,this.getIndex(t,r)),this.setIndex(t,r,n)},e}(a.RgbaTexture);e.PaletteTexture=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(0),i=r(8),o=function(t){function e(e){return t.call(this,e)||this}return n.__extends(e,t),Object.defineProperty(e.prototype,"_components",{get:function(){return a.COMP_RGBA},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_options",{get:function(){return{target:this._gl.TEXTURE_2D,width:a.TEXTURE_SIZE,height:a.TEXTURE_SIZE,min:this._gl.NEAREST,mag:this._gl.NEAREST,src:this._texdata,format:this._gl.RGBA,type:this._gl.UNSIGNED_BYTE}},enumerable:!0,configurable:!0}),e}(i.PixelTexture);e.RgbaTexture=o},function(t,e,r){"use strict";function n(){var t=document.getElementById("canvas");t.imageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.msImageSmoothingEnabled=!1;var e=l.getContext(t,{premultipliedAlpha:!1,alpha:!1,antialias:!1});return e.viewport(0,0,e.canvas.width,e.canvas.height),e}function a(t,e){return l.createTexture(t,{src:e,min:t.NEAREST,mag:t.NEAREST})}function i(t,e){return l.createTexture(t,{src:e,min:t.NEAREST,mag:t.NEAREST,format:t.LUMINANCE,internalFormat:t.LUMINANCE})}function o(t,e,r,n){for(var a=[],i=0;i<1024;i++)a.push(1);f++;var o=new u.TileBuffer(t,32,32).create(a,1);return new u.Renderable({buffer:o,texture:e.texture,palette:r.texture,paletteId:n,zSort:!1})}function s(t,e,r,n,a,i,o,s,l,f){var c=new u.QuadBuffer(t,1);return c.setAttributes(0,a,i,a+l,i+f,o,s,o+l,s+l,u.MIN_Z,0),c.create(),new u.Renderable({buffer:c,texture:e,palette:r,paletteId:n,zSort:!1})}Object.defineProperty(e,"__esModule",{value:!0});var u=r(10),l=r(4);e.initWebGl=n,e.createTexture=a,e.createAlphaTexture=i;var f=5;e.createTileSprite=o,e.createSprite=s},function(t,e,r){!function(e,r){t.exports=r()}(0,function(){var t=function(){function e(t){return a.appendChild(t.dom),t}function r(t){for(var e=0;e<a.children.length;e++)a.children[e].style.display=e===t?"block":"none";n=t}var n=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(t){t.preventDefault(),r(++n%a.children.length)},!1);var i=(performance||Date).now(),o=i,s=0,u=e(new t.Panel("FPS","#0ff","#002")),l=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var f=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:a,addPanel:e,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(l.update(t-i,200),t>o+1e3&&(u.update(1e3*s/(t-o),100),o=t,s=0,f)){var e=performance.memory;f.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){i=this.end()},domElement:a,setMode:r}};return t.Panel=function(t,e,r){var n=1/0,a=0,i=Math.round,o=i(window.devicePixelRatio||1),s=80*o,u=48*o,l=3*o,f=2*o,c=3*o,h=15*o,d=74*o,_=30*o,p=document.createElement("canvas");p.width=s,p.height=u,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=r,m.fillRect(0,0,s,u),m.fillStyle=e,m.fillText(t,l,f),m.fillRect(c,h,d,_),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(c,h,d,_),{dom:p,update:function(u,b){n=Math.min(n,u),a=Math.max(a,u),m.fillStyle=r,m.globalAlpha=1,m.fillRect(0,0,s,h),m.fillStyle=e,m.fillText(i(u)+" "+t+" ("+i(n)+"-"+i(a)+")",l,f),m.drawImage(p,c+o,h,d-o,_,c,h,d-o,_),m.fillRect(c+d-o,h,o,_),m.fillStyle=r,m.globalAlpha=.9,m.fillRect(c+d-o,h,o,i((1-u/b)*_))}}},t})},function(t,e,r){"use strict";function n(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e.buffer}Object.defineProperty(e,"__esModule",{value:!0}),e.stringToBuffer=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(39),a=r(14),i=function(){function t(t){this.data=t,this._dataView=new DataView(t),this._signature=new Uint8Array(t,0,a.SIGN_OFFSET),this._read()}return Object.defineProperty(t.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"palette",{get:function(){return this._palette},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageData",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageColorComponents",{get:function(){switch(this._header.colorType){case a.ColorType.Greyscale:case a.ColorType.Indexed:return 1;case a.ColorType.TruecolorAlpha:return 4;case a.ColorType.Truecolor:return 3;default:throw"unsupported color format"}},enumerable:!0,configurable:!0}),t.prototype.createPixelData=function(){for(var t=this._header.width,e=this._header.height,r=this.imageColorComponents,n=t*e*r,i=this.imageData.decompress(),o=new Uint8Array(n),s=0,u=0,l=0,f=0,c=function(){return l>1?o[s-r]:0},h=function(){return f>0?o[s-t*r]:0},d=0;d<i.byteLength;d++)if(l=d%(t*r+1),f=Math.floor(d/(t*r+1)),0!=l){switch(u){case a.PngFilter.None:o[s]=i[d];break;case a.PngFilter.Sub:o[s]=i[d]+c();break;case a.PngFilter.Up:o[s]=i[d]+h();break;case a.PngFilter.Average:o[s]=i[d]+Math.floor((c()+h())/2);break;case a.PngFilter.Paeth:o[s]=i[d]+this._paethPredictor(c(),h(),function(){return f>0&&l>1?o[s-t*r-r]:0}());break;default:throw"Unsupported PNG filter "+u}s++}else u=i[d];return o},t.prototype._paethPredictor=function(t,e,r){var n=t+e-r,a=Math.abs(n-t),i=Math.abs(n-e),o=Math.abs(n-r);return a<=i&&a<=o?t:i<=o?e:r},t.prototype.createPaletteDataRgba=function(t){for(var e=new Uint8Array(4*t),r=this._palette.data,n=0;n<this._palette.colors;n++){var a=3*n,i=4*n;e[i]=r[a],e[i+1]=r[a+1],e[i+2]=r[a+2],e[i+3]=this._transparency?this._transparency.getForColorIndex(n):255}return e},t.prototype._read=function(){this._checkSignature(),this._readChunks()},t.prototype._checkSignature=function(){var t=this._signature;if(137!=t[0]||80!=t[1]||78!=t[2]||71!=t[3]||13!=t[4]||10!=t[5]||26!=t[6]||10!=t[7])throw"Data is not a png"},t.prototype._readChunks=function(){for(var t=a.SIGN_OFFSET;t<this._dataView.byteLength;){var e=this._readChunk(t);if(e){switch(e.type){case a.ChunkType.Header:this._header=e;break;case a.ChunkType.Palette:this._palette=e;break;case a.ChunkType.Data:this._data=e;break;case a.ChunkType.Transparency:this._transparency=e}t+=e.totalLength}}},t.prototype._readChunk=function(t){var e=this._dataView,r=e.getUint32(t,!1);t+=4;var i=e.getUint32(t,!1);t+=4;var o=new Uint8Array(this._dataView.buffer,t,r);t+=r;var s=e.getUint32(t,!1);switch(i){case a.ChunkType.Header:return new n.HeaderChunk(r,i,o,s);case a.ChunkType.Palette:return new n.PaletteChunk(r,i,o,s);case a.ChunkType.Data:return new n.DataChunk(r,i,o,s);case a.ChunkType.End:return new n.EndChunk(r,i,o,s);case a.ChunkType.Transparency:return new n.TransparencyChunk(r,i,o,s);default:return new n.PngChunk(r,i,o,s)}},t.prototype._chunkToString=function(t){return[t>>>24&255,t>>>16&255,t>>>8&255,255&t].reduce(function(t,e){return t+String.fromCharCode(e)},"")},t}();e.PngReader=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),a=r(14),i=r(40),o=function(){function t(t,e,r,n){if(this._length=t,this._type=e,this._data=r,this._crc=n,t!=r.length)throw"Invalid length"}return Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalLength",{get:function(){return this._length+a.LENGTH_LENGTH+a.TYPE_LENGTH+a.CRC_LENGTH},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"crc",{get:function(){return this._crc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t}();e.PngChunk=o;var s=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;if(r!=a.ChunkType.Header)throw"Not a header chunk";return o._read(),o}return n.__extends(e,t),e.prototype._read=function(){var t=new DataView(this._data.buffer,this._data.byteOffset,this._data.byteLength);this._width=t.getUint32(0,!1),this._height=t.getUint32(4,!1),this._bitDepth=t.getUint8(8),this._colorType=t.getUint8(9),this._compressionMethod=t.getUint8(10),this._filterMethod=t.getUint8(11),this._interlace=1==t.getUint8(12)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bitDepth",{get:function(){return this._bitDepth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorType",{get:function(){return this._colorType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interlaced",{get:function(){return this._interlace},enumerable:!0,configurable:!0}),e}(o);e.HeaderChunk=s;var u=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;if(r!=a.ChunkType.Palette)throw"Not a palette chunk";if(n.length%3!=0)throw"Invalid palette length";return o}return n.__extends(e,t),Object.defineProperty(e.prototype,"colors",{get:function(){return this._data.length/3},enumerable:!0,configurable:!0}),e.prototype.getColor=function(t){return new Uint8Array(this._data.buffer,this._data.byteOffset+3*t,3)},e}(o);e.PaletteChunk=u;var l=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;if(r!=a.ChunkType.Data)throw"Not a data chunk";return o}return n.__extends(e,t),e.prototype.decompress=function(){return i.inflate(this._data)},e}(o);e.DataChunk=l;var f=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;if(r!=a.ChunkType.End)throw"Not a end chunk";return o}return n.__extends(e,t),e}(o);e.EndChunk=f;var c=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;if(r!=a.ChunkType.Transparency)throw"Not a transparency chunk";return o}return n.__extends(e,t),e.prototype.getForColorIndex=function(t){var e=this._data[t];return void 0!=e?e:255},e}(o);e.TransparencyChunk=c},function(t,e,r){"use strict";var n=r(3).assign,a=r(41),i=r(44),o=r(19),s={};n(s,a,i,o),t.exports=s},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=u.assign({level:_,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==d)throw new Error(f[r]);if(e.header&&s.deflateSetHeader(this.strm,e.header),e.dictionary){var a;if(a="string"==typeof e.dictionary?l.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=s.deflateSetDictionary(this.strm,a))!==d)throw new Error(f[r]);this._dict_set=!0}}function a(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||f[r.err];return r.result}function i(t,e){return e=e||{},e.raw=!0,a(t,e)}function o(t,e){return e=e||{},e.gzip=!0,a(t,e)}var s=r(42),u=r(3),l=r(17),f=r(9),c=r(18),h=Object.prototype.toString,d=0,_=-1,p=0,m=8;n.prototype.push=function(t,e){var r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=l.string2buf(t):"[object ArrayBuffer]"===h.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new u.Buf8(i),a.next_out=0,a.avail_out=i),1!==(r=s.deflate(a,n))&&r!==d)return this.onEnd(r),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(l.buf2binstring(u.shrinkBuf(a.output,a.next_out))):this.onData(u.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==r);return 4===n?(r=s.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d):2!==n||(this.onEnd(d),a.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=n,e.deflate=a,e.deflateRaw=i,e.gzip=o},function(t,e,r){"use strict";function n(t,e){return t.msg=k[e],e}function a(t){return(t<<1)-(t>4?9:0)}function i(t){for(var e=t.length;--e>=0;)t[e]=0}function o(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(D.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function s(t,e){R._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,o(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function f(t,e,r,n){var a=t.avail_in;return a>n&&(a=n),0===a?0:(t.avail_in-=a,D.arraySet(e,t.input,t.next_in,a,r),1===t.state.wrap?t.adler=P(t.adler,e,a,r):2===t.state.wrap&&(t.adler=U(t.adler,e,a,r)),t.next_in+=a,t.total_in+=a,a)}function c(t,e){var r,n,a=t.max_chain_length,i=t.strstart,o=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,f=t.w_mask,c=t.prev,h=t.strstart+ut,d=l[i+o-1],_=l[i+o];t.prev_length>=t.good_match&&(a>>=2),s>t.lookahead&&(s=t.lookahead);do{if(r=e,l[r+o]===_&&l[r+o-1]===d&&l[r]===l[i]&&l[++r]===l[i+1]){i+=2,r++;do{}while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<h);if(n=ut-(h-i),i=h-ut,n>o){if(t.match_start=e,o=n,n>=s)break;d=l[i+o-1],_=l[i+o]}}}while((e=c[e&f])>u&&0!=--a);return o<=t.lookahead?o:t.lookahead}function h(t){var e,r,n,a,i,o=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-lt)){D.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,r=t.hash_size,e=r;do{n=t.head[--e],t.head[e]=n>=o?n-o:0}while(--r);r=o,e=r;do{n=t.prev[--e],t.prev[e]=n>=o?n-o:0}while(--r);a+=o}if(0===t.strm.avail_in)break;if(r=f(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=r,t.lookahead+t.insert>=st)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+st-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<st)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function d(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===z)return yt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,s(t,!1),0===t.strm.avail_out))return yt;if(t.strstart-t.block_start>=t.w_size-lt&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===B?(s(t,!0),0===t.strm.avail_out?xt:gt):(t.strstart>t.block_start&&(s(t,!1),t.strm.avail_out),yt)}function _(t,e){for(var r,n;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===z)return yt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-lt&&(t.match_length=c(t,r)),t.match_length>=st)if(n=R._tr_tally(t,t.strstart-t.match_start,t.match_length-st),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=t.strstart<st-1?t.strstart:st-1,e===B?(s(t,!0),0===t.strm.avail_out?xt:gt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:vt}function p(t,e){for(var r,n,a;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===z)return yt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=st-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-lt&&(t.match_length=c(t,r),t.match_length<=5&&(t.strategy===j||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),t.prev_length>=st&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-st,n=R._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=a&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=st-1,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return yt}else if(t.match_available){if(n=R._tr_tally(t,0,t.window[t.strstart-1]),n&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return yt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=R._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===B?(s(t,!0),0===t.strm.avail_out?xt:gt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:vt}function m(t,e){for(var r,n,a,i,o=t.window;;){if(t.lookahead<=ut){if(h(t),t.lookahead<=ut&&e===z)return yt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=st&&t.strstart>0&&(a=t.strstart-1,(n=o[a])===o[++a]&&n===o[++a]&&n===o[++a])){i=t.strstart+ut;do{}while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i);t.match_length=ut-(i-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=st?(r=R._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===B?(s(t,!0),0===t.strm.avail_out?xt:gt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:vt}function b(t,e){for(var r;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===z)return yt;break}if(t.match_length=0,r=R._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return yt}return t.insert=0,e===B?(s(t,!0),0===t.strm.avail_out?xt:gt):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?yt:vt}function y(t,e,r,n,a){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=a}function v(t){t.window_size=2*t.w_size,i(t.head),t.max_lazy_match=T[t.level].max_lazy,t.good_match=T[t.level].good_length,t.nice_match=T[t.level].nice_length,t.max_chain_length=T[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,t.match_available=0,t.ins_h=0}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new D.Buf16(2*it),this.dyn_dtree=new D.Buf16(2*(2*nt+1)),this.bl_tree=new D.Buf16(2*(2*at+1)),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new D.Buf16(ot+1),this.heap=new D.Buf16(2*rt+1),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new D.Buf16(2*rt+1),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function g(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=K,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ct:mt,t.adler=2===e.wrap?0:1,e.last_flush=z,R._tr_init(e),L):n(t,V)}function E(t){var e=g(t);return e===L&&v(t.state),e}function M(t,e){return t&&t.state?2!==t.state.wrap?V:(t.state.gzhead=e,L):V}function S(t,e,r,a,i,o){if(!t)return V;var s=1;if(e===Y&&(e=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),i<1||i>J||r!==$||a<8||a>15||e<0||e>9||o<0||o>Q)return n(t,V);8===a&&(a=9);var u=new x;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=a,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+st-1)/st),u.window=new D.Buf8(2*u.w_size),u.head=new D.Buf16(u.hash_size),u.prev=new D.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new D.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=o,u.method=r,E(t)}function w(t,e){return S(t,e,$,tt,et,W)}function I(t,e){var r,s,f,c;if(!t||!t.state||e>N||e<0)return t?n(t,V):V;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||s.status===bt&&e!==B)return n(t,0===t.avail_out?G:V);if(s.strm=t,r=s.last_flush,s.last_flush=e,s.status===ct)if(2===s.wrap)t.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=U(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ht):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=H||s.level<2?4:0),u(s,Et),s.status=mt);else{var h=$+(s.w_bits-8<<4)<<8,d=-1;d=s.strategy>=H||s.level<2?0:s.level<6?1:6===s.level?2:3,h|=d<<6,0!==s.strstart&&(h|=ft),h+=31-h%31,s.status=mt,l(s,h),0!==s.strstart&&(l(s,t.adler>>>16),l(s,65535&t.adler)),t.adler=1}if(s.status===ht)if(s.gzhead.extra){for(f=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),o(t),f=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=dt)}else s.status=dt;if(s.status===dt)if(s.gzhead.name){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),o(t),f=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),0===c&&(s.gzindex=0,s.status=_t)}else s.status=_t;if(s.status===_t)if(s.gzhead.comment){f=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),o(t),f=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>f&&(t.adler=U(t.adler,s.pending_buf,s.pending-f,f)),0===c&&(s.status=pt)}else s.status=pt;if(s.status===pt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(t),s.pending+2<=s.pending_buf_size&&(u(s,255&t.adler),u(s,t.adler>>8&255),t.adler=0,s.status=mt)):s.status=mt),0!==s.pending){if(o(t),0===t.avail_out)return s.last_flush=-1,L}else if(0===t.avail_in&&a(e)<=a(r)&&e!==B)return n(t,G);if(s.status===bt&&0!==t.avail_in)return n(t,G);if(0!==t.avail_in||0!==s.lookahead||e!==z&&s.status!==bt){var _=s.strategy===H?b(s,e):s.strategy===q?m(s,e):T[s.level].func(s,e);if(_!==xt&&_!==gt||(s.status=bt),_===yt||_===xt)return 0===t.avail_out&&(s.last_flush=-1),L;if(_===vt&&(e===O?R._tr_align(s):e!==N&&(R._tr_stored_block(s,0,0,!1),e===C&&(i(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(t),0===t.avail_out))return s.last_flush=-1,L}return e!==B?L:s.wrap<=0?X:(2===s.wrap?(u(s,255&t.adler),u(s,t.adler>>8&255),u(s,t.adler>>16&255),u(s,t.adler>>24&255),u(s,255&t.total_in),u(s,t.total_in>>8&255),u(s,t.total_in>>16&255),u(s,t.total_in>>24&255)):(l(s,t.adler>>>16),l(s,65535&t.adler)),o(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?L:X)}function F(t){var e;return t&&t.state?(e=t.state.status)!==ct&&e!==ht&&e!==dt&&e!==_t&&e!==pt&&e!==mt&&e!==bt?n(t,V):(t.state=null,e===mt?n(t,Z):L):V}function A(t,e){var r,n,a,o,s,u,l,f,c=e.length;if(!t||!t.state)return V;if(r=t.state,2===(o=r.wrap)||1===o&&r.status!==ct||r.lookahead)return V;for(1===o&&(t.adler=P(t.adler,e,c,0)),r.wrap=0,c>=r.w_size&&(0===o&&(i(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new D.Buf8(r.w_size),D.arraySet(f,e,c-r.w_size,r.w_size,0),e=f,c=r.w_size),s=t.avail_in,u=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,h(r);r.lookahead>=st;){n=r.strstart,a=r.lookahead-(st-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+st-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=st-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=st-1,r.match_available=0,t.next_in=u,t.input=l,t.avail_in=s,r.wrap=o,L}var T,D=r(3),R=r(43),P=r(15),U=r(16),k=r(9),z=0,O=1,C=3,B=4,N=5,L=0,X=1,V=-2,Z=-3,G=-5,Y=-1,j=1,H=2,q=3,Q=4,W=0,K=2,$=8,J=9,tt=15,et=8,rt=286,nt=30,at=19,it=2*rt+1,ot=15,st=3,ut=258,lt=ut+st+1,ft=32,ct=42,ht=69,dt=73,_t=91,pt=103,mt=113,bt=666,yt=1,vt=2,xt=3,gt=4,Et=3;T=[new y(0,0,0,0,d),new y(4,4,8,4,_),new y(4,5,16,8,_),new y(4,6,32,32,_),new y(4,4,16,16,p),new y(8,16,32,32,p),new y(8,16,128,128,p),new y(8,32,128,256,p),new y(32,128,258,1024,p),new y(32,258,258,4096,p)],e.deflateInit=w,e.deflateInit2=S,e.deflateReset=E,e.deflateResetKeep=g,e.deflateSetHeader=M,e.deflate=I,e.deflateEnd=F,e.deflateSetDictionary=A,e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t,e,r,n,a){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=t&&t.length}function i(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function o(t){return t<256?it[t]:it[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,r){t.bi_valid>H-r?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>H-t.bi_valid,t.bi_valid+=r-H):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function l(t,e,r){u(t,r[2*e],r[2*e+1])}function f(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function c(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var r,n,a,i,o,s,u=e.dyn_tree,l=e.max_code,f=e.stat_desc.static_tree,c=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,_=e.stat_desc.max_length,p=0;for(i=0;i<=j;i++)t.bl_count[i]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<Y;r++)n=t.heap[r],i=u[2*u[2*n+1]+1]+1,i>_&&(i=_,p++),u[2*n+1]=i,n>l||(t.bl_count[i]++,o=0,n>=d&&(o=h[n-d]),s=u[2*n],t.opt_len+=s*(i+o),c&&(t.static_len+=s*(f[2*n+1]+o)));if(0!==p){do{for(i=_-1;0===t.bl_count[i];)i--;t.bl_count[i]--,t.bl_count[i+1]+=2,t.bl_count[_]--,p-=2}while(p>0);for(i=_;0!==i;i--)for(n=t.bl_count[i];0!==n;)(a=t.heap[--r])>l||(u[2*a+1]!==i&&(t.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),n--)}}function d(t,e,r){var n,a,i=new Array(j+1),o=0;for(n=1;n<=j;n++)i[n]=o=o+r[n-1]<<1;for(a=0;a<=e;a++){var s=t[2*a+1];0!==s&&(t[2*a]=f(i[s]++,s))}}function _(){var t,e,r,n,i,o=new Array(j+1);for(r=0,n=0;n<L-1;n++)for(st[n]=r,t=0;t<1<<J[n];t++)ot[r++]=n;for(ot[r-1]=n,i=0,n=0;n<16;n++)for(ut[n]=i,t=0;t<1<<tt[n];t++)it[i++]=n;for(i>>=7;n<Z;n++)for(ut[n]=i<<7,t=0;t<1<<tt[n]-7;t++)it[256+i++]=n;for(e=0;e<=j;e++)o[e]=0;for(t=0;t<=143;)nt[2*t+1]=8,t++,o[8]++;for(;t<=255;)nt[2*t+1]=9,t++,o[9]++;for(;t<=279;)nt[2*t+1]=7,t++,o[7]++;for(;t<=287;)nt[2*t+1]=8,t++,o[8]++;for(d(nt,V+1,o),t=0;t<Z;t++)at[2*t+1]=5,at[2*t]=f(t,5);lt=new a(nt,J,X+1,V,j),ft=new a(at,tt,0,Z,j),ct=new a(new Array(0),et,0,G,q)}function p(t){var e;for(e=0;e<V;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Z;e++)t.dyn_dtree[2*e]=0;for(e=0;e<G;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function m(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function b(t,e,r,n){m(t),n&&(s(t,r),s(t,~r)),P.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function y(t,e,r,n){var a=2*e,i=2*r;return t[a]<t[i]||t[a]===t[i]&&n[e]<=n[r]}function v(t,e,r){for(var n=t.heap[r],a=r<<1;a<=t.heap_len&&(a<t.heap_len&&y(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!y(e,n,t.heap[a],t.depth));)t.heap[r]=t.heap[a],r=a,a<<=1;t.heap[r]=n}function x(t,e,r){var n,a,i,s,f=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],a=t.pending_buf[t.l_buf+f],f++,0===n?l(t,a,e):(i=ot[a],l(t,i+X+1,e),s=J[i],0!==s&&(a-=st[i],u(t,a,s)),n--,i=o(n),l(t,i,r),0!==(s=tt[i])&&(n-=ut[i],u(t,n,s)))}while(f<t.last_lit);l(t,Q,e)}function g(t,e){var r,n,a,i=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=Y,r=0;r<u;r++)0!==i[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):i[2*r+1]=0;for(;t.heap_len<2;)a=t.heap[++t.heap_len]=l<2?++l:0,i[2*a]=1,t.depth[a]=0,t.opt_len--,s&&(t.static_len-=o[2*a+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)v(t,i,r);a=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],v(t,i,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,i[2*a]=i[2*r]+i[2*n],t.depth[a]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,i[2*r+1]=i[2*n+1]=a,t.heap[1]=a++,v(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),d(i,l,t.bl_count)}function E(t,e,r){var n,a,i=-1,o=e[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)a=o,o=e[2*(n+1)+1],++s<u&&a===o||(s<l?t.bl_tree[2*a]+=s:0!==a?(a!==i&&t.bl_tree[2*a]++,t.bl_tree[2*W]++):s<=10?t.bl_tree[2*K]++:t.bl_tree[2*$]++,s=0,i=a,0===o?(u=138,l=3):a===o?(u=6,l=3):(u=7,l=4))}function M(t,e,r){var n,a,i=-1,o=e[1],s=0,f=7,c=4;for(0===o&&(f=138,c=3),n=0;n<=r;n++)if(a=o,o=e[2*(n+1)+1],!(++s<f&&a===o)){if(s<c)do{l(t,a,t.bl_tree)}while(0!=--s);else 0!==a?(a!==i&&(l(t,a,t.bl_tree),s--),l(t,W,t.bl_tree),u(t,s-3,2)):s<=10?(l(t,K,t.bl_tree),u(t,s-3,3)):(l(t,$,t.bl_tree),u(t,s-11,7));s=0,i=a,0===o?(f=138,c=3):a===o?(f=6,c=3):(f=7,c=4)}}function S(t){var e;for(E(t,t.dyn_ltree,t.l_desc.max_code),E(t,t.dyn_dtree,t.d_desc.max_code),g(t,t.bl_desc),e=G-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function w(t,e,r,n){var a;for(u(t,e-257,5),u(t,r-1,5),u(t,n-4,4),a=0;a<n;a++)u(t,t.bl_tree[2*rt[a]+1],3);M(t,t.dyn_ltree,e-1),M(t,t.dyn_dtree,r-1)}function I(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return k;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return z;for(e=32;e<X;e++)if(0!==t.dyn_ltree[2*e])return z;return k}function F(t){ht||(_(),ht=!0),t.l_desc=new i(t.dyn_ltree,lt),t.d_desc=new i(t.dyn_dtree,ft),t.bl_desc=new i(t.bl_tree,ct),t.bi_buf=0,t.bi_valid=0,p(t)}function A(t,e,r,n){u(t,(C<<1)+(n?1:0),3),b(t,e,r,!0)}function T(t){u(t,B<<1,3),l(t,Q,nt),c(t)}function D(t,e,r,n){var a,i,o=0;t.level>0?(t.strm.data_type===O&&(t.strm.data_type=I(t)),g(t,t.l_desc),g(t,t.d_desc),o=S(t),a=t.opt_len+3+7>>>3,(i=t.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==e?A(t,e,r,n):t.strategy===U||i===a?(u(t,(B<<1)+(n?1:0),3),x(t,nt,at)):(u(t,(N<<1)+(n?1:0),3),w(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),x(t,t.dyn_ltree,t.dyn_dtree)),p(t),n&&m(t)}function R(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ot[r]+X+1)]++,t.dyn_dtree[2*o(e)]++),t.last_lit===t.lit_bufsize-1}var P=r(3),U=4,k=0,z=1,O=2,C=0,B=1,N=2,L=29,X=256,V=X+1+L,Z=30,G=19,Y=2*V+1,j=15,H=16,q=7,Q=256,W=16,K=17,$=18,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=new Array(2*(V+2));n(nt);var at=new Array(2*Z);n(at);var it=new Array(512);n(it);var ot=new Array(256);n(ot);var st=new Array(L);n(st);var ut=new Array(Z);n(ut);var lt,ft,ct,ht=!1;e._tr_init=F,e._tr_stored_block=A,e._tr_flush_block=D,e._tr_tally=R,e._tr_align=T},function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.inflateInit2(this.strm,e.windowBits);if(r!==l.Z_OK)throw new Error(f[r]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function a(t,e){var r=new n(e);if(r.push(t,!0),r.err)throw r.msg||f[r.err];return r.result}function i(t,e){return e=e||{},e.raw=!0,a(t,e)}var o=r(45),s=r(3),u=r(17),l=r(19),f=r(9),c=r(18),h=r(48),d=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,a,i,f,c,h=this.strm,_=this.options.chunkSize,p=this.options.dictionary,m=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof t?h.input=u.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new s.Buf8(_),h.next_out=0,h.avail_out=_),r=o.inflate(h,l.Z_NO_FLUSH),r===l.Z_NEED_DICT&&p&&(c="string"==typeof p?u.string2buf(p):"[object ArrayBuffer]"===d.call(p)?new Uint8Array(p):p,r=o.inflateSetDictionary(this.strm,c)),r===l.Z_BUF_ERROR&&!0===m&&(r=l.Z_OK,m=!1),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&r!==l.Z_STREAM_END&&(0!==h.avail_in||n!==l.Z_FINISH&&n!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(a=u.utf8border(h.output,h.next_out),i=h.next_out-a,f=u.buf2string(h.output,a),h.next_out=i,h.avail_out=_-i,i&&s.arraySet(h.output,h.output,a,i,0),this.onData(f)):this.onData(s.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(r=o.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):n!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),h.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=n,e.inflate=a,e.inflateRaw=i,e.ungzip=a},function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=C,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new y.Buf32(pt),e.distcode=e.distdyn=new y.Buf32(mt),e.sane=1,e.back=-1,T):P}function o(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,i(t)):P}function s(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?P:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,o(t))):P}function u(t,e){var r,n;return t?(n=new a,t.state=n,n.window=null,r=s(t,e),r!==T&&(t.state=null),r):P}function l(t){return u(t,bt)}function f(t){if(yt){var e;for(m=new y.Buf32(512),b=new y.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(E(S,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;E(w,t.lens,0,32,b,0,t.work,{bits:5}),yt=!1}t.lencode=m,t.lenbits=9,t.distcode=b,t.distbits=5}function c(t,e,r,n){var a,i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new y.Buf8(i.wsize)),n>=i.wsize?(y.arraySet(i.window,e,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),y.arraySet(i.window,e,r-n,a,i.wnext),n-=a,n?(y.arraySet(i.window,e,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}function h(t,e){var r,a,i,o,s,u,l,h,d,_,p,m,b,pt,mt,bt,yt,vt,xt,gt,Et,Mt,St,wt,It=0,Ft=new y.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return P;r=t.state,r.mode===q&&(r.mode=Q),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,a=t.input,u=t.avail_in,h=r.hold,d=r.bits,_=u,p=l,Mt=T;t:for(;;)switch(r.mode){case C:if(0===r.wrap){r.mode=Q;break}for(;d<16;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(2&r.wrap&&35615===h){r.check=0,Ft[0]=255&h,Ft[1]=h>>>8&255,r.check=x(r.check,Ft,2,0),h=0,d=0,r.mode=B;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=ht;break}if((15&h)!==O){t.msg="unknown compression method",r.mode=ht;break}if(h>>>=4,d-=4,Et=8+(15&h),0===r.wbits)r.wbits=Et;else if(Et>r.wbits){t.msg="invalid window size",r.mode=ht;break}r.dmax=1<<Et,t.adler=r.check=1,r.mode=512&h?j:q,h=0,d=0;break;case B:for(;d<16;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(r.flags=h,(255&r.flags)!==O){t.msg="unknown compression method",r.mode=ht;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ht;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,r.check=x(r.check,Ft,2,0)),h=0,d=0,r.mode=N;case N:for(;d<32;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.head&&(r.head.time=h),512&r.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,Ft[2]=h>>>16&255,Ft[3]=h>>>24&255,r.check=x(r.check,Ft,4,0)),h=0,d=0,r.mode=L;case L:for(;d<16;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,r.check=x(r.check,Ft,2,0)),h=0,d=0,r.mode=X;case X:if(1024&r.flags){for(;d<16;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,r.check=x(r.check,Ft,2,0)),h=0,d=0}else r.head&&(r.head.extra=null);r.mode=V;case V:if(1024&r.flags&&(m=r.length,m>u&&(m=u),m&&(r.head&&(Et=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),y.arraySet(r.head.extra,a,o,m,Et)),512&r.flags&&(r.check=x(r.check,a,m,o)),u-=m,o+=m,r.length-=m),r.length))break t;r.length=0,r.mode=Z;case Z:if(2048&r.flags){if(0===u)break t;m=0;do{Et=a[o+m++],r.head&&Et&&r.length<65536&&(r.head.name+=String.fromCharCode(Et))}while(Et&&m<u);if(512&r.flags&&(r.check=x(r.check,a,m,o)),u-=m,o+=m,Et)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=G;case G:if(4096&r.flags){if(0===u)break t;m=0;do{Et=a[o+m++],r.head&&Et&&r.length<65536&&(r.head.comment+=String.fromCharCode(Et))}while(Et&&m<u);if(512&r.flags&&(r.check=x(r.check,a,m,o)),u-=m,o+=m,Et)break t}else r.head&&(r.head.comment=null);r.mode=Y;case Y:if(512&r.flags){for(;d<16;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ht;break}h=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=q;break;case j:for(;d<32;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}t.adler=r.check=n(h),h=0,d=0,r.mode=H;case H:if(0===r.havedict)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=d,R;t.adler=r.check=1,r.mode=q;case q:if(e===F||e===A)break t;case Q:if(r.last){h>>>=7&d,d-=7&d,r.mode=lt;break}for(;d<3;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}switch(r.last=1&h,h>>>=1,d-=1,3&h){case 0:r.mode=W;break;case 1:if(f(r),r.mode=rt,e===A){h>>>=2,d-=2;break t}break;case 2:r.mode=J;break;case 3:t.msg="invalid block type",r.mode=ht}h>>>=2,d-=2;break;case W:for(h>>>=7&d,d-=7&d;d<32;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ht;break}if(r.length=65535&h,h=0,d=0,r.mode=K,e===A)break t;case K:r.mode=$;case $:if(m=r.length){if(m>u&&(m=u),m>l&&(m=l),0===m)break t;y.arraySet(i,a,o,m,s),u-=m,o+=m,l-=m,s+=m,r.length-=m;break}r.mode=q;break;case J:for(;d<14;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(r.nlen=257+(31&h),h>>>=5,d-=5,r.ndist=1+(31&h),h>>>=5,d-=5,r.ncode=4+(15&h),h>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ht;break}r.have=0,r.mode=tt;case tt:for(;r.have<r.ncode;){for(;d<3;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.lens[At[r.have++]]=7&h,h>>>=3,d-=3}for(;r.have<19;)r.lens[At[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,St={bits:r.lenbits},Mt=E(M,r.lens,0,19,r.lencode,0,r.work,St),r.lenbits=St.bits,Mt){t.msg="invalid code lengths set",r.mode=ht;break}r.have=0,r.mode=et;case et:for(;r.have<r.nlen+r.ndist;){for(;It=r.lencode[h&(1<<r.lenbits)-1],mt=It>>>24,bt=It>>>16&255,yt=65535&It,!(mt<=d);){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(yt<16)h>>>=mt,d-=mt,r.lens[r.have++]=yt;else{if(16===yt){for(wt=mt+2;d<wt;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(h>>>=mt,d-=mt,0===r.have){t.msg="invalid bit length repeat",r.mode=ht;break}Et=r.lens[r.have-1],m=3+(3&h),h>>>=2,d-=2}else if(17===yt){for(wt=mt+3;d<wt;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}h>>>=mt,d-=mt,Et=0,m=3+(7&h),h>>>=3,d-=3}else{for(wt=mt+7;d<wt;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}h>>>=mt,d-=mt,Et=0,m=11+(127&h),h>>>=7,d-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ht;break}for(;m--;)r.lens[r.have++]=Et}}if(r.mode===ht)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ht;break}if(r.lenbits=9,St={bits:r.lenbits},Mt=E(S,r.lens,0,r.nlen,r.lencode,0,r.work,St),r.lenbits=St.bits,Mt){t.msg="invalid literal/lengths set",r.mode=ht;break}if(r.distbits=6,r.distcode=r.distdyn,St={bits:r.distbits},Mt=E(w,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,St),r.distbits=St.bits,Mt){t.msg="invalid distances set",r.mode=ht;break}if(r.mode=rt,e===A)break t;case rt:r.mode=nt;case nt:if(u>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=d,g(t,p),s=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,a=t.input,u=t.avail_in,h=r.hold,d=r.bits,r.mode===q&&(r.back=-1);break}for(r.back=0;It=r.lencode[h&(1<<r.lenbits)-1],mt=It>>>24,bt=It>>>16&255,yt=65535&It,!(mt<=d);){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(bt&&0==(240&bt)){for(vt=mt,xt=bt,gt=yt;It=r.lencode[gt+((h&(1<<vt+xt)-1)>>vt)],mt=It>>>24,bt=It>>>16&255,yt=65535&It,!(vt+mt<=d);){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}h>>>=vt,d-=vt,r.back+=vt}if(h>>>=mt,d-=mt,r.back+=mt,r.length=yt,0===bt){r.mode=ut;break}if(32&bt){r.back=-1,r.mode=q;break}if(64&bt){t.msg="invalid literal/length code",r.mode=ht;break}r.extra=15&bt,r.mode=at;case at:if(r.extra){for(wt=r.extra;d<wt;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=it;case it:for(;It=r.distcode[h&(1<<r.distbits)-1],mt=It>>>24,bt=It>>>16&255,yt=65535&It,!(mt<=d);){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(0==(240&bt)){for(vt=mt,xt=bt,gt=yt;It=r.distcode[gt+((h&(1<<vt+xt)-1)>>vt)],mt=It>>>24,bt=It>>>16&255,yt=65535&It,!(vt+mt<=d);){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}h>>>=vt,d-=vt,r.back+=vt}if(h>>>=mt,d-=mt,r.back+=mt,64&bt){t.msg="invalid distance code",r.mode=ht;break}r.offset=yt,r.extra=15&bt,r.mode=ot;case ot:if(r.extra){for(wt=r.extra;d<wt;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ht;break}r.mode=st;case st:if(0===l)break t;if(m=p-l,r.offset>m){if((m=r.offset-m)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ht;break}m>r.wnext?(m-=r.wnext,b=r.wsize-m):b=r.wnext-m,m>r.length&&(m=r.length),pt=r.window}else pt=i,b=s-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do{i[s++]=pt[b++]}while(--m);0===r.length&&(r.mode=nt);break;case ut:if(0===l)break t;i[s++]=r.length,l--,r.mode=nt;break;case lt:if(r.wrap){for(;d<32;){if(0===u)break t;u--,h|=a[o++]<<d,d+=8}if(p-=l,t.total_out+=p,r.total+=p,p&&(t.adler=r.check=r.flags?x(r.check,i,p,s-p):v(r.check,i,p,s-p)),p=l,(r.flags?h:n(h))!==r.check){t.msg="incorrect data check",r.mode=ht;break}h=0,d=0}r.mode=ft;case ft:if(r.wrap&&r.flags){for(;d<32;){if(0===u)break t;u--,h+=a[o++]<<d,d+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ht;break}h=0,d=0}r.mode=ct;case ct:Mt=D;break t;case ht:Mt=U;break t;case dt:return k;case _t:default:return P}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=u,r.hold=h,r.bits=d,(r.wsize||p!==t.avail_out&&r.mode<ht&&(r.mode<lt||e!==I))&&c(t,t.output,t.next_out,p-t.avail_out)?(r.mode=dt,k):(_-=t.avail_in,p-=t.avail_out,t.total_in+=_,t.total_out+=p,r.total+=p,r.wrap&&p&&(t.adler=r.check=r.flags?x(r.check,i,p,t.next_out-p):v(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===q?128:0)+(r.mode===rt||r.mode===K?256:0),(0===_&&0===p||e===I)&&Mt===T&&(Mt=z),Mt)}function d(t){if(!t||!t.state)return P;var e=t.state;return e.window&&(e.window=null),t.state=null,T}function _(t,e){var r;return t&&t.state?(r=t.state,0==(2&r.wrap)?P:(r.head=e,e.done=!1,T)):P}function p(t,e){var r,n,a=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==H?P:r.mode===H&&(n=1,(n=v(n,e,a,0))!==r.check)?U:c(t,e,a,a)?(r.mode=dt,k):(r.havedict=1,T)):P}var m,b,y=r(3),v=r(15),x=r(16),g=r(46),E=r(47),M=0,S=1,w=2,I=4,F=5,A=6,T=0,D=1,R=2,P=-2,U=-3,k=-4,z=-5,O=8,C=1,B=2,N=3,L=4,X=5,V=6,Z=7,G=8,Y=9,j=10,H=11,q=12,Q=13,W=14,K=15,$=16,J=17,tt=18,et=19,rt=20,nt=21,at=22,it=23,ot=24,st=25,ut=26,lt=27,ft=28,ct=29,ht=30,dt=31,_t=32,pt=852,mt=592,bt=15,yt=!0;e.inflateReset=o,e.inflateReset2=s,e.inflateResetKeep=i,e.inflateInit=l,e.inflateInit2=u,e.inflate=h,e.inflateEnd=d,e.inflateGetHeader=_,e.inflateSetDictionary=p,e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,a,i,o,s,u,l,f,c,h,d,_,p,m,b,y,v,x,g,E,M,S,w,I;r=t.state,n=t.next_in,w=t.input,a=n+(t.avail_in-5),i=t.next_out,I=t.output,o=i-(e-t.avail_out),s=i+(t.avail_out-257),u=r.dmax,l=r.wsize,f=r.whave,c=r.wnext,h=r.window,d=r.hold,_=r.bits,p=r.lencode,m=r.distcode,b=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;t:do{_<15&&(d+=w[n++]<<_,_+=8,d+=w[n++]<<_,_+=8),v=p[d&b];e:for(;;){if(x=v>>>24,d>>>=x,_-=x,0===(x=v>>>16&255))I[i++]=65535&v;else{if(!(16&x)){if(0==(64&x)){v=p[(65535&v)+(d&(1<<x)-1)];continue e}if(32&x){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}g=65535&v,x&=15,x&&(_<x&&(d+=w[n++]<<_,_+=8),g+=d&(1<<x)-1,d>>>=x,_-=x),_<15&&(d+=w[n++]<<_,_+=8,d+=w[n++]<<_,_+=8),v=m[d&y];r:for(;;){if(x=v>>>24,d>>>=x,_-=x,!(16&(x=v>>>16&255))){if(0==(64&x)){v=m[(65535&v)+(d&(1<<x)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(E=65535&v,x&=15,_<x&&(d+=w[n++]<<_,(_+=8)<x&&(d+=w[n++]<<_,_+=8)),(E+=d&(1<<x)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=x,_-=x,x=i-o,E>x){if((x=E-x)>f&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(M=0,S=h,0===c){if(M+=l-x,x<g){g-=x;do{I[i++]=h[M++]}while(--x);M=i-E,S=I}}else if(c<x){if(M+=l+c-x,(x-=c)<g){g-=x;do{I[i++]=h[M++]}while(--x);if(M=0,c<g){x=c,g-=x;do{I[i++]=h[M++]}while(--x);M=i-E,S=I}}}else if(M+=c-x,x<g){g-=x;do{I[i++]=h[M++]}while(--x);M=i-E,S=I}for(;g>2;)I[i++]=S[M++],I[i++]=S[M++],I[i++]=S[M++],g-=3;g&&(I[i++]=S[M++],g>1&&(I[i++]=S[M++]))}else{M=i-E;do{I[i++]=I[M++],I[i++]=I[M++],I[i++]=I[M++],g-=3}while(g>2);g&&(I[i++]=I[M++],g>1&&(I[i++]=I[M++]))}break}}break}}while(n<a&&i<s);g=_>>3,n-=g,_-=g<<3,d&=(1<<_)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?a-n+5:5-(n-a),t.avail_out=i<s?s-i+257:257-(i-s),r.hold=d,r.bits=_}},function(t,e,r){"use strict";var n=r(3),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,l,f,c,h){var d,_,p,m,b,y,v,x,g,E=h.bits,M=0,S=0,w=0,I=0,F=0,A=0,T=0,D=0,R=0,P=0,U=null,k=0,z=new n.Buf16(16),O=new n.Buf16(16),C=null,B=0;for(M=0;M<=15;M++)z[M]=0;for(S=0;S<u;S++)z[e[r+S]]++;for(F=E,I=15;I>=1&&0===z[I];I--);if(F>I&&(F=I),0===I)return l[f++]=20971520,l[f++]=20971520,h.bits=1,0;for(w=1;w<I&&0===z[w];w++);for(F<w&&(F=w),D=1,M=1;M<=15;M++)if(D<<=1,(D-=z[M])<0)return-1;if(D>0&&(0===t||1!==I))return-1;for(O[1]=0,M=1;M<15;M++)O[M+1]=O[M]+z[M];for(S=0;S<u;S++)0!==e[r+S]&&(c[O[e[r+S]]++]=S);if(0===t?(U=C=c,y=19):1===t?(U=a,k-=257,C=i,B-=257,y=256):(U=o,C=s,y=-1),P=0,S=0,M=w,b=f,A=F,T=0,p=-1,R=1<<F,m=R-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){v=M-T,c[S]<y?(x=0,g=c[S]):c[S]>y?(x=C[B+c[S]],g=U[k+c[S]]):(x=96,g=0),d=1<<M-T,_=1<<A,w=_;do{_-=d,l[b+(P>>T)+_]=v<<24|x<<16|g|0}while(0!==_);for(d=1<<M-1;P&d;)d>>=1;if(0!==d?(P&=d-1,P+=d):P=0,S++,0==--z[M]){if(M===I)break;M=e[r+c[S]]}if(M>F&&(P&m)!==p){for(0===T&&(T=F),b+=w,A=M-T,D=1<<A;A+T<I&&!((D-=z[A+T])<=0);)A++,D<<=1;if(R+=1<<A,1===t&&R>852||2===t&&R>592)return 1;p=P&m,l[p]=F<<24|A<<16|b-f|0}}return 0!==P&&(l[b+P]=M-T<<24|64<<16|0),h.bits=F,0}},function(t,e,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n},function(t,e){t.exports="attribute vec4 position;\r\nattribute float z_index;\r\nattribute float pal_shift;\r\nattribute vec2 texcoord;\r\n\r\nuniform mat4 matrix;\r\n\r\nvarying vec2 v_uv;\r\nvarying float v_pal;\r\n\r\nconst float HALF_PX = 0.001953125; \r\nconst float PX = 0.00390625;\r\n\r\nvoid main() {\r\n    v_uv = texcoord * PX + HALF_PX;// vec2(PX * texcoord.x + HALF_PX, PX * texcoord.y + HALF_PX);//(texcoord - tweak2);\r\n    v_pal = pal_shift;\r\n    vec4 res = matrix * vec4(position.xy, z_index, 1.0);\r\n    //res.z =  -(z_index / 128.0) + 1.0;\r\n    //res.w = res.w * res.z;\r\n    gl_Position = res;\r\n}"},function(t,e){t.exports="precision mediump float;\r\n\r\nuniform sampler2D texture;\r\nuniform sampler2D palette;\r\nuniform float pal_offset;\r\n\r\nconst float HALF_PX = 0.001953125; \r\nconst float PX = 0.00390625;\r\n\r\nvarying vec2 v_uv;\r\nvarying float v_pal;\r\n\r\nvoid main() {\r\n    // get palette index.\r\n    float lookup = texture2D(texture, v_uv).r;\r\n    \r\n    // create uv from palette index and palette offset\r\n    vec2 palUv = vec2(lookup+v_pal,pal_offset);\r\n    \r\n    //lookup color and discard if alpha is present.\r\n    vec4 res = texture2D(palette, palUv);\r\n\r\n    //gl_FragColor = vec4(1.0,0.0,1.0,1.0);\r\n    if(res.a < 1.0)\r\n         discard;\r\n    else\r\n        gl_FragColor = res;\r\n}\r\n"},function(t,e){t.exports="PNG\r\n\n\0\0\0\rIHDR\0\0\0\0\0\0\b\0\0\0kXT\0\0\0\tpHYs\0\0\v\0\0\v\0\0\0\nOiCCPPhotoshop ICC profile\0\0xSgTS=BKKoR\b RB&*!\tJ!QEEQ,\f\n!{k>\b\fH3Q5\fB.@\n$p\0\bd!s#\0~<<+\"\0x\v\b\0M0B\\t8K\b\0@zB\0@F&S\0\0`cb\0P-\0`'\0{\0[!\0 eD\0h;\0VE\0X0\0fK9\0-\x000IWfH\0\0\v\0\b\f\x000Q)\0{\0`##x\0\0FW<+*\0\0x<$9E[\b-qWW.(I+6aa@.y24\0\0x6_-\"bbp@\0\0t~,/;m%h^\vuf@\0Wp~<<EJB[aW}g_Wl~<$2]GL\tbG\v\"IbX*QqD2\"B)%d,>5\0j>{-]cK'Xt\0\0o(\bhw?G%\0fIq\0\0^D$.T?\b\0\0D*A,\v`6B$BB\ndr`)B(*`/@4Qhp.U=pa\b(\tA\ba!bX#\b!H$ Q\"K5H1RT UH=r9\\F;\x002G1Q=\fC7F\vdt1r=6h>C03l0.B8,\tc\"\fVcwE\t6wB aAHXLXNH $4\t7\tQ'\"K&b21XH,#/{C7$C2'ITFnR#,4H#dk9, +3![\nb@qS(RjJ4e2AURT5ZBRQ4u9IKhhitNWGw\f\rg(gwLT071oUX**|\nJ&*/T\vUUT^S}FU3S\tUPSSg;goT?~YYLOCQ_ \vcx,!k\ru5&|v*=9C3J3WRf?qtN\t(~))4L1e\\kXHQG6EYAJ'\\'GgSS\nM=:.kDwn^Loy}/TmG\fX\f$\f<5qo</QC]@Caa<FFi\\$mm&&!&KMMRM);L;L5=12`ZxZ,eIZYnZ9YXUZ]F%NNgm}agbg}}=\rZ~sr:V:?}/gX3)iSGggsK.>.Jtq]z6i4)Y3sCQ?\v0k~OCOg#/c/Wwa>>r><72Y_7Oo_C#dz\0%gA[z|!?:eAAA!h!iP~aa~\f'W?pX15wCsDDDg1O9-J5*>.j<74?.fYXXIlK9.*6nl\v{/]py.,:@LN8A*%w%\nyg\"/6C\\*NH*Mz5y$3,'L\rL:v m2=:1qB!Mggfven/kY-\nBTZ(*geWf9+7KW-Xj9<qy\n+V<*mOW~&zMk^k\vU\n}]OX/Ya>(xodff-[n\r\rVE/(C<e;?TTTT6an{4[>UUMfeI?m]Nmq#=TR+Gw-\r6\rU#pDy\t\r:v{vg/jBFS[b[O>zG4<YyJTig}~.`{cjotE;;\\tWW:_mt<O\\kz{f7y9=zo~r'w'O_@AC?[jwGC\r8>99?rCd&/~m|x31^VwwO| (hSc3-\0\0\0 cHRM\0\0z%\0\0\0\0\0\0\0\0u0\0\0`\0\0:\0\0o_F\0\0\0PLTE-O-$-`3\0Gh5PxhGxP\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\x001}\0\0\0\rtRNS\0=\"\0\0IDATxn@#FL)io[$j{w6qM<MM:6QZ7>k{{x~r>s/g-u}\0J#,,,,,,\v8MmbM,KZMs\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0x{=x\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0bva\0\0\0\0IENDB`"},function(t,e){t.exports="PNG\r\n\n\0\0\0\rIHDR\0\0\0\0\0\0\b\0\0\0kXT\0\0\0\tpHYs\0\0\n\0\0\n}vH\0\0\nOiCCPPhotoshop ICC profile\0\0xSgTS=BKKoR\b RB&*!\tJ!QEEQ,\f\n!{k>\b\fH3Q5\fB.@\n$p\0\bd!s#\0~<<+\"\0x\v\b\0M0B\\t8K\b\0@zB\0@F&S\0\0`cb\0P-\0`'\0{\0[!\0 eD\0h;\0VE\0X0\0fK9\0-\x000IWfH\0\0\v\0\b\f\x000Q)\0{\0`##x\0\0FW<+*\0\0x<$9E[\b-qWW.(I+6aa@.y24\0\0x6_-\"bbp@\0\0t~,/;m%h^\vuf@\0Wp~<<EJB[aW}g_Wl~<$2]GL\tbG\v\"IbX*QqD2\"B)%d,>5\0j>{-]cK'Xt\0\0o(\bhw?G%\0fIq\0\0^D$.T?\b\0\0D*A,\v`6B$BB\ndr`)B(*`/@4Qhp.U=pa\b(\tA\ba!bX#\b!H$ Q\"K5H1RT UH=r9\\F;\x002G1Q=\fC7F\vdt1r=6h>C03l0.B8,\tc\"\fVcwE\t6wB aAHXLXNH $4\t7\tQ'\"K&b21XH,#/{C7$C2'ITFnR#,4H#dk9, +3![\nb@qS(RjJ4e2AURT5ZBRQ4u9IKhhitNWGw\f\rg(gwLT071oUX**|\nJ&*/T\vUUT^S}FU3S\tUPSSg;goT?~YYLOCQ_ \vcx,!k\ru5&|v*=9C3J3WRf?qtN\t(~))4L1e\\kXHQG6EYAJ'\\'GgSS\nM=:.kDwn^Loy}/TmG\fX\f$\f<5qo</QC]@Caa<FFi\\$mm&&!&KMMRM);L;L5=12`ZxZ,eIZYnZ9YXUZ]F%NNgm}agbg}}=\rZ~sr:V:?}/gX3)iSGggsK.>.Jtq]z6i4)Y3sCQ?\v0k~OCOg#/c/Wwa>>r><72Y_7Oo_C#dz\0%gA[z|!?:eAAA!h!iP~aa~\f'W?pX15wCsDDDg1O9-J5*>.j<74?.fYXXIlK9.*6nl\v{/]py.,:@LN8A*%w%\nyg\"/6C\\*NH*Mz5y$3,'L\rL:v m2=:1qB!Mggfven/kY-\nBTZ(*geWf9+7KW-Xj9<qy\n+V<*mOW~&zMk^k\vU\n}]OX/Ya>(xodff-[n\r\rVE/(C<e;?TTTT6an{4[>UUMfeI?m]Nmq#=TR+Gw-\r6\rU#pDy\t\r:v{vg/jBFS[b[O>zG4<YyJTig}~.`{cjotE;;\\tWW:_mt<O\\kz{f7y9=zo~r'w'O_@AC?[jwGC\r8>99?rCd&/~m|x31^VwwO| (hSc3-\0\0\0 cHRM\0\0z%\0\0\0\0\0\0\0\0u0\0\0`\0\0:\0\0o_F\0\0\0PLTE((xxx((\0{~X\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0d\0\0\0tRNS\0@*\0\0IDATx:\bDpfP!j%=3od]%B8jC\b\x006/^ynm\0~u)<;JG_W_wPc\f=\t\t?BD\b\fYRD?W/9/IQ~P*71e+\0#x|*qDqK:?>ED|r\\EE\t;L<'a\r=Eq\\63~d@xlAey6UUF?m||;\\E#A5SvA4\tX\fiC.kR\0OL#1xJI@>_W]{CnR; [b'!T#rL=^$A__Lgdz$7x>fl;\t\r\rD*P\0\0}0l#0z+o\0=B@\b<f>/9\vU:'AI5\nT>5frK\tI?{E_,UROSC@\0M8{c%]K^31XGT118,'D</\fd6X80c71Xn6G/OhWBs;\b~Em8<go%!^0<\0zD\tF|5GZC\0x2V_:\fU1|2\0\b[@:y\bX&P;p/1X'X?k{X}PK~E\b PSz&?z|9-PMb{o;z7?qk]\"[t>-^GIpvv~C)P[s|d6A\fyh\\)(1\0-[f+rOWo\tII{A\rxW@FIpo\nG9\r!\0UjF6FtDS1s5n\t8sp8\0a \r`:y/}vX~xB\b)cdr.\fr>0Pu\fGKV+<Zg^\b\b\f\0?rAbjne>>Xo6Hjo]5^_kc\0,?\v#Pbt>3XSsUUv5X^z[*;oshT`}DP\r\0{\0Z2~1Ed0\f\"}qzCh?`3@\"n&y\t}!E/)5->xw,ns2s5Dfz>3-\b\f(077P9~ Gq\v?iC@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0@\0o\0q)>\0\0\0\0IENDB`"},function(t,e){t.exports={x:16,y:16,chars:" !\"#$%&'()+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz",widths:[3,2,4,9,6,6,6,2,4,4,4,6,3,6,2,5,5,4,5,5,5,5,5,5,5,5,2,3,7,6,7,5,8,5,5,5,5,5,5,5,6,4,5,6,5,6,6,5,5,5,5,5,6,6,6,6,6,6,6,4,5,4,6,7,3,5,5,5,5,5,4,5,5,2,3,5,2,6,5,5,5,5,5,5,4,5,5,6,6,5,5]}}]);
//# sourceMappingURL=bundle.js.map